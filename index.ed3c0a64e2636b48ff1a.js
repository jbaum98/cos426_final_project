!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/cos426_final_project.git/",n(n.s=12)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return re}));var o={};n.r(o),n.d(o,"create",(function(){return l})),n.d(o,"clone",(function(){return c})),n.d(o,"copy",(function(){return u})),n.d(o,"fromValues",(function(){return d})),n.d(o,"set",(function(){return f})),n.d(o,"identity",(function(){return h})),n.d(o,"transpose",(function(){return p})),n.d(o,"invert",(function(){return m})),n.d(o,"adjoint",(function(){return _})),n.d(o,"determinant",(function(){return v})),n.d(o,"multiply",(function(){return b})),n.d(o,"translate",(function(){return g})),n.d(o,"scale",(function(){return y})),n.d(o,"rotate",(function(){return x})),n.d(o,"rotateX",(function(){return w})),n.d(o,"rotateY",(function(){return E})),n.d(o,"rotateZ",(function(){return S})),n.d(o,"fromTranslation",(function(){return M})),n.d(o,"fromScaling",(function(){return A})),n.d(o,"fromRotation",(function(){return C})),n.d(o,"fromXRotation",(function(){return k})),n.d(o,"fromYRotation",(function(){return O})),n.d(o,"fromZRotation",(function(){return T})),n.d(o,"fromRotationTranslation",(function(){return R})),n.d(o,"fromQuat2",(function(){return L})),n.d(o,"getTranslation",(function(){return N})),n.d(o,"getScaling",(function(){return P})),n.d(o,"getRotation",(function(){return z})),n.d(o,"fromRotationTranslationScale",(function(){return I})),n.d(o,"fromRotationTranslationScaleOrigin",(function(){return F})),n.d(o,"fromQuat",(function(){return D})),n.d(o,"frustum",(function(){return B})),n.d(o,"perspective",(function(){return H})),n.d(o,"perspectiveFromFieldOfView",(function(){return j})),n.d(o,"ortho",(function(){return V})),n.d(o,"lookAt",(function(){return q})),n.d(o,"targetTo",(function(){return U})),n.d(o,"str",(function(){return G})),n.d(o,"frob",(function(){return X})),n.d(o,"add",(function(){return Y})),n.d(o,"subtract",(function(){return W})),n.d(o,"multiplyScalar",(function(){return K})),n.d(o,"multiplyScalarAndAdd",(function(){return Q})),n.d(o,"exactEquals",(function(){return J})),n.d(o,"equals",(function(){return Z})),n.d(o,"mul",(function(){return $})),n.d(o,"sub",(function(){return tt}));var r={};n.r(r),n.d(r,"create",(function(){return et})),n.d(r,"clone",(function(){return nt})),n.d(r,"length",(function(){return ot})),n.d(r,"fromValues",(function(){return rt})),n.d(r,"copy",(function(){return it})),n.d(r,"set",(function(){return at})),n.d(r,"add",(function(){return st})),n.d(r,"subtract",(function(){return lt})),n.d(r,"multiply",(function(){return ct})),n.d(r,"divide",(function(){return ut})),n.d(r,"ceil",(function(){return dt})),n.d(r,"floor",(function(){return ft})),n.d(r,"min",(function(){return ht})),n.d(r,"max",(function(){return pt})),n.d(r,"round",(function(){return mt})),n.d(r,"scale",(function(){return _t})),n.d(r,"scaleAndAdd",(function(){return vt})),n.d(r,"distance",(function(){return bt})),n.d(r,"squaredDistance",(function(){return gt})),n.d(r,"squaredLength",(function(){return yt})),n.d(r,"negate",(function(){return xt})),n.d(r,"inverse",(function(){return wt})),n.d(r,"normalize",(function(){return Et})),n.d(r,"dot",(function(){return St})),n.d(r,"cross",(function(){return Mt})),n.d(r,"lerp",(function(){return At})),n.d(r,"hermite",(function(){return Ct})),n.d(r,"bezier",(function(){return kt})),n.d(r,"random",(function(){return Ot})),n.d(r,"transformMat4",(function(){return Tt})),n.d(r,"transformMat3",(function(){return Rt})),n.d(r,"transformQuat",(function(){return Lt})),n.d(r,"rotateX",(function(){return Nt})),n.d(r,"rotateY",(function(){return Pt})),n.d(r,"rotateZ",(function(){return zt})),n.d(r,"angle",(function(){return It})),n.d(r,"zero",(function(){return Ft})),n.d(r,"str",(function(){return Dt})),n.d(r,"exactEquals",(function(){return Bt})),n.d(r,"equals",(function(){return Ht})),n.d(r,"sub",(function(){return Vt})),n.d(r,"mul",(function(){return qt})),n.d(r,"div",(function(){return Ut})),n.d(r,"dist",(function(){return Gt})),n.d(r,"sqrDist",(function(){return Xt})),n.d(r,"len",(function(){return Yt})),n.d(r,"sqrLen",(function(){return Wt})),n.d(r,"forEach",(function(){return Kt}));var i=1e-6,a="undefined"!=typeof Float32Array?Float32Array:Array,s=Math.random;Math.PI;function l(){var t=new a(16);return a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function c(t){var e=new a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,n,o,r,i,s,l,c,u,d,f,h,p,m,_){var v=new a(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=o,v[4]=r,v[5]=i,v[6]=s,v[7]=l,v[8]=c,v[9]=u,v[10]=d,v[11]=f,v[12]=h,v[13]=p,v[14]=m,v[15]=_,v}function f(t,e,n,o,r,i,a,s,l,c,u,d,f,h,p,m,_){return t[0]=e,t[1]=n,t[2]=o,t[3]=r,t[4]=i,t[5]=a,t[6]=s,t[7]=l,t[8]=c,t[9]=u,t[10]=d,t[11]=f,t[12]=h,t[13]=p,t[14]=m,t[15]=_,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p(t,e){if(t===e){var n=e[1],o=e[2],r=e[3],i=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=o,t[9]=i,t[11]=e[14],t[12]=r,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function m(t,e){var n=e[0],o=e[1],r=e[2],i=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],_=e[14],v=e[15],b=n*s-o*a,g=n*l-r*a,y=n*c-i*a,x=o*l-r*s,w=o*c-i*s,E=r*c-i*l,S=u*m-d*p,M=u*_-f*p,A=u*v-h*p,C=d*_-f*m,k=d*v-h*m,O=f*v-h*_,T=b*O-g*k+y*C+x*A-w*M+E*S;return T?(T=1/T,t[0]=(s*O-l*k+c*C)*T,t[1]=(r*k-o*O-i*C)*T,t[2]=(m*E-_*w+v*x)*T,t[3]=(f*w-d*E-h*x)*T,t[4]=(l*A-a*O-c*M)*T,t[5]=(n*O-r*A+i*M)*T,t[6]=(_*y-p*E-v*g)*T,t[7]=(u*E-f*y+h*g)*T,t[8]=(a*k-s*A+c*S)*T,t[9]=(o*A-n*k-i*S)*T,t[10]=(p*w-m*y+v*b)*T,t[11]=(d*y-u*w-h*b)*T,t[12]=(s*M-a*C-l*S)*T,t[13]=(n*C-o*M+r*S)*T,t[14]=(m*g-p*x-_*b)*T,t[15]=(u*x-d*g+f*b)*T,t):null}function _(t,e){var n=e[0],o=e[1],r=e[2],i=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],_=e[14],v=e[15];return t[0]=s*(f*v-h*_)-d*(l*v-c*_)+m*(l*h-c*f),t[1]=-(o*(f*v-h*_)-d*(r*v-i*_)+m*(r*h-i*f)),t[2]=o*(l*v-c*_)-s*(r*v-i*_)+m*(r*c-i*l),t[3]=-(o*(l*h-c*f)-s*(r*h-i*f)+d*(r*c-i*l)),t[4]=-(a*(f*v-h*_)-u*(l*v-c*_)+p*(l*h-c*f)),t[5]=n*(f*v-h*_)-u*(r*v-i*_)+p*(r*h-i*f),t[6]=-(n*(l*v-c*_)-a*(r*v-i*_)+p*(r*c-i*l)),t[7]=n*(l*h-c*f)-a*(r*h-i*f)+u*(r*c-i*l),t[8]=a*(d*v-h*m)-u*(s*v-c*m)+p*(s*h-c*d),t[9]=-(n*(d*v-h*m)-u*(o*v-i*m)+p*(o*h-i*d)),t[10]=n*(s*v-c*m)-a*(o*v-i*m)+p*(o*c-i*s),t[11]=-(n*(s*h-c*d)-a*(o*h-i*d)+u*(o*c-i*s)),t[12]=-(a*(d*_-f*m)-u*(s*_-l*m)+p*(s*f-l*d)),t[13]=n*(d*_-f*m)-u*(o*_-r*m)+p*(o*f-r*d),t[14]=-(n*(s*_-l*m)-a*(o*_-r*m)+p*(o*l-r*s)),t[15]=n*(s*f-l*d)-a*(o*f-r*d)+u*(o*l-r*s),t}function v(t){var e=t[0],n=t[1],o=t[2],r=t[3],i=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],f=t[11],h=t[12],p=t[13],m=t[14],_=t[15];return(e*a-n*i)*(d*_-f*m)-(e*s-o*i)*(u*_-f*p)+(e*l-r*i)*(u*m-d*p)+(n*s-o*a)*(c*_-f*h)-(n*l-r*a)*(c*m-d*h)+(o*l-r*s)*(c*p-u*h)}function b(t,e,n){var o=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],m=e[12],_=e[13],v=e[14],b=e[15],g=n[0],y=n[1],x=n[2],w=n[3];return t[0]=g*o+y*s+x*d+w*m,t[1]=g*r+y*l+x*f+w*_,t[2]=g*i+y*c+x*h+w*v,t[3]=g*a+y*u+x*p+w*b,g=n[4],y=n[5],x=n[6],w=n[7],t[4]=g*o+y*s+x*d+w*m,t[5]=g*r+y*l+x*f+w*_,t[6]=g*i+y*c+x*h+w*v,t[7]=g*a+y*u+x*p+w*b,g=n[8],y=n[9],x=n[10],w=n[11],t[8]=g*o+y*s+x*d+w*m,t[9]=g*r+y*l+x*f+w*_,t[10]=g*i+y*c+x*h+w*v,t[11]=g*a+y*u+x*p+w*b,g=n[12],y=n[13],x=n[14],w=n[15],t[12]=g*o+y*s+x*d+w*m,t[13]=g*r+y*l+x*f+w*_,t[14]=g*i+y*c+x*h+w*v,t[15]=g*a+y*u+x*p+w*b,t}function g(t,e,n){var o,r,i,a,s,l,c,u,d,f,h,p,m=n[0],_=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*_+e[8]*v+e[12],t[13]=e[1]*m+e[5]*_+e[9]*v+e[13],t[14]=e[2]*m+e[6]*_+e[10]*v+e[14],t[15]=e[3]*m+e[7]*_+e[11]*v+e[15]):(o=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],t[0]=o,t[1]=r,t[2]=i,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=f,t[10]=h,t[11]=p,t[12]=o*m+s*_+d*v+e[12],t[13]=r*m+l*_+f*v+e[13],t[14]=i*m+c*_+h*v+e[14],t[15]=a*m+u*_+p*v+e[15]),t}function y(t,e,n){var o=n[0],r=n[1],i=n[2];return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function x(t,e,n,o){var r,a,s,l,c,u,d,f,h,p,m,_,v,b,g,y,x,w,E,S,M,A,C,k,O=o[0],T=o[1],R=o[2],L=Math.hypot(O,T,R);return L<i?null:(O*=L=1/L,T*=L,R*=L,r=Math.sin(n),s=1-(a=Math.cos(n)),l=e[0],c=e[1],u=e[2],d=e[3],f=e[4],h=e[5],p=e[6],m=e[7],_=e[8],v=e[9],b=e[10],g=e[11],y=O*O*s+a,x=T*O*s+R*r,w=R*O*s-T*r,E=O*T*s-R*r,S=T*T*s+a,M=R*T*s+O*r,A=O*R*s+T*r,C=T*R*s-O*r,k=R*R*s+a,t[0]=l*y+f*x+_*w,t[1]=c*y+h*x+v*w,t[2]=u*y+p*x+b*w,t[3]=d*y+m*x+g*w,t[4]=l*E+f*S+_*M,t[5]=c*E+h*S+v*M,t[6]=u*E+p*S+b*M,t[7]=d*E+m*S+g*M,t[8]=l*A+f*C+_*k,t[9]=c*A+h*C+v*k,t[10]=u*A+p*C+b*k,t[11]=d*A+m*C+g*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function w(t,e,n){var o=Math.sin(n),r=Math.cos(n),i=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*r+c*o,t[5]=a*r+u*o,t[6]=s*r+d*o,t[7]=l*r+f*o,t[8]=c*r-i*o,t[9]=u*r-a*o,t[10]=d*r-s*o,t[11]=f*r-l*o,t}function E(t,e,n){var o=Math.sin(n),r=Math.cos(n),i=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],d=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r-c*o,t[1]=a*r-u*o,t[2]=s*r-d*o,t[3]=l*r-f*o,t[8]=i*o+c*r,t[9]=a*o+u*r,t[10]=s*o+d*r,t[11]=l*o+f*r,t}function S(t,e,n){var o=Math.sin(n),r=Math.cos(n),i=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],d=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r+c*o,t[1]=a*r+u*o,t[2]=s*r+d*o,t[3]=l*r+f*o,t[4]=c*r-i*o,t[5]=u*r-a*o,t[6]=d*r-s*o,t[7]=f*r-l*o,t}function M(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function A(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,e,n){var o,r,a,s=n[0],l=n[1],c=n[2],u=Math.hypot(s,l,c);return u<i?null:(s*=u=1/u,l*=u,c*=u,o=Math.sin(e),a=1-(r=Math.cos(e)),t[0]=s*s*a+r,t[1]=l*s*a+c*o,t[2]=c*s*a-l*o,t[3]=0,t[4]=s*l*a-c*o,t[5]=l*l*a+r,t[6]=c*l*a+s*o,t[7]=0,t[8]=s*c*a+l*o,t[9]=l*c*a-s*o,t[10]=c*c*a+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function k(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,e,n){var o=e[0],r=e[1],i=e[2],a=e[3],s=o+o,l=r+r,c=i+i,u=o*s,d=o*l,f=o*c,h=r*l,p=r*c,m=i*c,_=a*s,v=a*l,b=a*c;return t[0]=1-(h+m),t[1]=d+b,t[2]=f-v,t[3]=0,t[4]=d-b,t[5]=1-(u+m),t[6]=p+_,t[7]=0,t[8]=f+v,t[9]=p-_,t[10]=1-(u+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function L(t,e){var n=new a(3),o=-e[0],r=-e[1],i=-e[2],s=e[3],l=e[4],c=e[5],u=e[6],d=e[7],f=o*o+r*r+i*i+s*s;return f>0?(n[0]=2*(l*s+d*o+c*i-u*r)/f,n[1]=2*(c*s+d*r+u*o-l*i)/f,n[2]=2*(u*s+d*i+l*r-c*o)/f):(n[0]=2*(l*s+d*o+c*i-u*r),n[1]=2*(c*s+d*r+u*o-l*i),n[2]=2*(u*s+d*i+l*r-c*o)),R(t,e,n),t}function N(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function P(t,e){var n=e[0],o=e[1],r=e[2],i=e[4],a=e[5],s=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,o,r),t[1]=Math.hypot(i,a,s),t[2]=Math.hypot(l,c,u),t}function z(t,e){var n=new a(3);P(n,e);var o=1/n[0],r=1/n[1],i=1/n[2],s=e[0]*o,l=e[1]*r,c=e[2]*i,u=e[4]*o,d=e[5]*r,f=e[6]*i,h=e[8]*o,p=e[9]*r,m=e[10]*i,_=s+d+m,v=0;return _>0?(v=2*Math.sqrt(_+1),t[3]=.25*v,t[0]=(f-p)/v,t[1]=(h-c)/v,t[2]=(l-u)/v):s>d&&s>m?(v=2*Math.sqrt(1+s-d-m),t[3]=(f-p)/v,t[0]=.25*v,t[1]=(l+u)/v,t[2]=(h+c)/v):d>m?(v=2*Math.sqrt(1+d-s-m),t[3]=(h-c)/v,t[0]=(l+u)/v,t[1]=.25*v,t[2]=(f+p)/v):(v=2*Math.sqrt(1+m-s-d),t[3]=(l-u)/v,t[0]=(h+c)/v,t[1]=(f+p)/v,t[2]=.25*v),t}function I(t,e,n,o){var r=e[0],i=e[1],a=e[2],s=e[3],l=r+r,c=i+i,u=a+a,d=r*l,f=r*c,h=r*u,p=i*c,m=i*u,_=a*u,v=s*l,b=s*c,g=s*u,y=o[0],x=o[1],w=o[2];return t[0]=(1-(p+_))*y,t[1]=(f+g)*y,t[2]=(h-b)*y,t[3]=0,t[4]=(f-g)*x,t[5]=(1-(d+_))*x,t[6]=(m+v)*x,t[7]=0,t[8]=(h+b)*w,t[9]=(m-v)*w,t[10]=(1-(d+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function F(t,e,n,o,r){var i=e[0],a=e[1],s=e[2],l=e[3],c=i+i,u=a+a,d=s+s,f=i*c,h=i*u,p=i*d,m=a*u,_=a*d,v=s*d,b=l*c,g=l*u,y=l*d,x=o[0],w=o[1],E=o[2],S=r[0],M=r[1],A=r[2],C=(1-(m+v))*x,k=(h+y)*x,O=(p-g)*x,T=(h-y)*w,R=(1-(f+v))*w,L=(_+b)*w,N=(p+g)*E,P=(_-b)*E,z=(1-(f+m))*E;return t[0]=C,t[1]=k,t[2]=O,t[3]=0,t[4]=T,t[5]=R,t[6]=L,t[7]=0,t[8]=N,t[9]=P,t[10]=z,t[11]=0,t[12]=n[0]+S-(C*S+T*M+N*A),t[13]=n[1]+M-(k*S+R*M+P*A),t[14]=n[2]+A-(O*S+L*M+z*A),t[15]=1,t}function D(t,e){var n=e[0],o=e[1],r=e[2],i=e[3],a=n+n,s=o+o,l=r+r,c=n*a,u=o*a,d=o*s,f=r*a,h=r*s,p=r*l,m=i*a,_=i*s,v=i*l;return t[0]=1-d-p,t[1]=u+v,t[2]=f-_,t[3]=0,t[4]=u-v,t[5]=1-c-p,t[6]=h+m,t[7]=0,t[8]=f+_,t[9]=h-m,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function B(t,e,n,o,r,i,a){var s=1/(n-e),l=1/(r-o),c=1/(i-a);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(r+o)*l,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}function H(t,e,n,o,r){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(i=1/(o-r),t[10]=(r+o)*i,t[14]=2*r*o*i):(t[10]=-1,t[14]=-2*o),t}function j(t,e,n,o){var r=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+s),c=2/(r+i);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*l*.5,t[9]=(r-i)*c*.5,t[10]=o/(n-o),t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n/(n-o),t[15]=0,t}function V(t,e,n,o,r,i,a){var s=1/(e-n),l=1/(o-r),c=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(r+o)*l,t[14]=(a+i)*c,t[15]=1,t}function q(t,e,n,o){var r,a,s,l,c,u,d,f,p,m,_=e[0],v=e[1],b=e[2],g=o[0],y=o[1],x=o[2],w=n[0],E=n[1],S=n[2];return Math.abs(_-w)<i&&Math.abs(v-E)<i&&Math.abs(b-S)<i?h(t):(d=_-w,f=v-E,p=b-S,r=y*(p*=m=1/Math.hypot(d,f,p))-x*(f*=m),a=x*(d*=m)-g*p,s=g*f-y*d,(m=Math.hypot(r,a,s))?(r*=m=1/m,a*=m,s*=m):(r=0,a=0,s=0),l=f*s-p*a,c=p*r-d*s,u=d*a-f*r,(m=Math.hypot(l,c,u))?(l*=m=1/m,c*=m,u*=m):(l=0,c=0,u=0),t[0]=r,t[1]=l,t[2]=d,t[3]=0,t[4]=a,t[5]=c,t[6]=f,t[7]=0,t[8]=s,t[9]=u,t[10]=p,t[11]=0,t[12]=-(r*_+a*v+s*b),t[13]=-(l*_+c*v+u*b),t[14]=-(d*_+f*v+p*b),t[15]=1,t)}function U(t,e,n,o){var r=e[0],i=e[1],a=e[2],s=o[0],l=o[1],c=o[2],u=r-n[0],d=i-n[1],f=a-n[2],h=u*u+d*d+f*f;h>0&&(u*=h=1/Math.sqrt(h),d*=h,f*=h);var p=l*f-c*d,m=c*u-s*f,_=s*d-l*u;return(h=p*p+m*m+_*_)>0&&(p*=h=1/Math.sqrt(h),m*=h,_*=h),t[0]=p,t[1]=m,t[2]=_,t[3]=0,t[4]=d*_-f*m,t[5]=f*p-u*_,t[6]=u*m-d*p,t[7]=0,t[8]=u,t[9]=d,t[10]=f,t[11]=0,t[12]=r,t[13]=i,t[14]=a,t[15]=1,t}function G(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function X(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Y(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function W(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function K(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Q(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t[4]=e[4]+n[4]*o,t[5]=e[5]+n[5]*o,t[6]=e[6]+n[6]*o,t[7]=e[7]+n[7]*o,t[8]=e[8]+n[8]*o,t[9]=e[9]+n[9]*o,t[10]=e[10]+n[10]*o,t[11]=e[11]+n[11]*o,t[12]=e[12]+n[12]*o,t[13]=e[13]+n[13]*o,t[14]=e[14]+n[14]*o,t[15]=e[15]+n[15]*o,t}function J(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Z(t,e){var n=t[0],o=t[1],r=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],_=t[13],v=t[14],b=t[15],g=e[0],y=e[1],x=e[2],w=e[3],E=e[4],S=e[5],M=e[6],A=e[7],C=e[8],k=e[9],O=e[10],T=e[11],R=e[12],L=e[13],N=e[14],P=e[15];return Math.abs(n-g)<=i*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-y)<=i*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(r-x)<=i*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-w)<=i*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=i*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-S)<=i*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-M)<=i*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(u-A)<=i*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(d-C)<=i*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-k)<=i*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(h-O)<=i*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(p-T)<=i*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(m-R)<=i*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(_-L)<=i*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(v-N)<=i*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(b-P)<=i*Math.max(1,Math.abs(b),Math.abs(P))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var $=b,tt=W;function et(){var t=new a(3);return a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function nt(t){var e=new a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ot(t){var e=t[0],n=t[1],o=t[2];return Math.hypot(e,n,o)}function rt(t,e,n){var o=new a(3);return o[0]=t,o[1]=e,o[2]=n,o}function it(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function at(t,e,n,o){return t[0]=e,t[1]=n,t[2]=o,t}function st(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function lt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function ct(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function ut(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function dt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ft(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ht(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function pt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function mt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function _t(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function vt(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t}function bt(t,e){var n=e[0]-t[0],o=e[1]-t[1],r=e[2]-t[2];return Math.hypot(n,o,r)}function gt(t,e){var n=e[0]-t[0],o=e[1]-t[1],r=e[2]-t[2];return n*n+o*o+r*r}function yt(t){var e=t[0],n=t[1],o=t[2];return e*e+n*n+o*o}function xt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function wt(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Et(t,e){var n=e[0],o=e[1],r=e[2],i=n*n+o*o+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function St(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Mt(t,e,n){var o=e[0],r=e[1],i=e[2],a=n[0],s=n[1],l=n[2];return t[0]=r*l-i*s,t[1]=i*a-o*l,t[2]=o*s-r*a,t}function At(t,e,n,o){var r=e[0],i=e[1],a=e[2];return t[0]=r+o*(n[0]-r),t[1]=i+o*(n[1]-i),t[2]=a+o*(n[2]-a),t}function Ct(t,e,n,o,r,i){var a=i*i,s=a*(2*i-3)+1,l=a*(i-2)+i,c=a*(i-1),u=a*(3-2*i);return t[0]=e[0]*s+n[0]*l+o[0]*c+r[0]*u,t[1]=e[1]*s+n[1]*l+o[1]*c+r[1]*u,t[2]=e[2]*s+n[2]*l+o[2]*c+r[2]*u,t}function kt(t,e,n,o,r,i){var a=1-i,s=a*a,l=i*i,c=s*a,u=3*i*s,d=3*l*a,f=l*i;return t[0]=e[0]*c+n[0]*u+o[0]*d+r[0]*f,t[1]=e[1]*c+n[1]*u+o[1]*d+r[1]*f,t[2]=e[2]*c+n[2]*u+o[2]*d+r[2]*f,t}function Ot(t,e){e=e||1;var n=2*s()*Math.PI,o=2*s()-1,r=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=o*e,t}function Tt(t,e,n){var o=e[0],r=e[1],i=e[2],a=n[3]*o+n[7]*r+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*o+n[4]*r+n[8]*i+n[12])/a,t[1]=(n[1]*o+n[5]*r+n[9]*i+n[13])/a,t[2]=(n[2]*o+n[6]*r+n[10]*i+n[14])/a,t}function Rt(t,e,n){var o=e[0],r=e[1],i=e[2];return t[0]=o*n[0]+r*n[3]+i*n[6],t[1]=o*n[1]+r*n[4]+i*n[7],t[2]=o*n[2]+r*n[5]+i*n[8],t}function Lt(t,e,n){var o=n[0],r=n[1],i=n[2],a=n[3],s=e[0],l=e[1],c=e[2],u=r*c-i*l,d=i*s-o*c,f=o*l-r*s,h=r*f-i*d,p=i*u-o*f,m=o*d-r*u,_=2*a;return u*=_,d*=_,f*=_,h*=2,p*=2,m*=2,t[0]=s+u+h,t[1]=l+d+p,t[2]=c+f+m,t}function Nt(t,e,n,o){var r=[],i=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],i[0]=r[0],i[1]=r[1]*Math.cos(o)-r[2]*Math.sin(o),i[2]=r[1]*Math.sin(o)+r[2]*Math.cos(o),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Pt(t,e,n,o){var r=[],i=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],i[0]=r[2]*Math.sin(o)+r[0]*Math.cos(o),i[1]=r[1],i[2]=r[2]*Math.cos(o)-r[0]*Math.sin(o),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function zt(t,e,n,o){var r=[],i=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],i[0]=r[0]*Math.cos(o)-r[1]*Math.sin(o),i[1]=r[0]*Math.sin(o)+r[1]*Math.cos(o),i[2]=r[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function It(t,e){var n=t[0],o=t[1],r=t[2],i=e[0],a=e[1],s=e[2],l=Math.sqrt(n*n+o*o+r*r)*Math.sqrt(i*i+a*a+s*s),c=l&&St(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function Ft(t){return t[0]=0,t[1]=0,t[2]=0,t}function Dt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Bt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ht(t,e){var n=t[0],o=t[1],r=t[2],a=e[0],s=e[1],l=e[2];return Math.abs(n-a)<=i*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=i*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(r-l)<=i*Math.max(1,Math.abs(r),Math.abs(l))}var jt,Vt=lt,qt=ct,Ut=ut,Gt=bt,Xt=gt,Yt=ot,Wt=yt,Kt=(jt=et(),function(t,e,n,o,r,i){var a,s;for(e||(e=3),n||(n=0),s=o?Math.min(o*e+n,t.length):t.length,a=n;a<s;a+=e)jt[0]=t[a],jt[1]=t[a+1],jt[2]=t[a+2],r(jt,jt,i),t[a]=jt[0],t[a+1]=jt[1],t[a+2]=jt[2];return t});function Qt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jt(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function Zt(t,e,n){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,n);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=n}return n}var $t=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),te.set(this,{writable:!0,value:void 0}),ee.set(this,{writable:!0,value:void 0}),ne.set(this,{writable:!0,value:void 0}),oe.set(this,{writable:!0,value:void 0}),this.source=e,Zt(this,te,n)}var e,n,o;return e=t,(n=[{key:"program",get:function(){return Jt(this,ee)||Zt(this,ee,function(t,e,n){var o=t.createShader(t.VERTEX_SHADER);t.shaderSource(o,e);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,n);var i=t.createProgram();return t.attachShader(i,o),t.attachShader(i,r),t.compileShader(o),t.compileShader(r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)?i:(console.error("Link failed: "+t.getProgramInfoLog(i)),console.error("vs info-log: "+t.getShaderInfoLog(o)),console.error("fs info-log: "+t.getShaderInfoLog(r)),null)}(Jt(this,te),"#version 300 es\n    // an attribute is an input (in) to a vertex shader.\n    // It will receive data from a buffer\n    in vec4 a_position;\n    out vec4 v_position;\n\n    // all shaders have a main function\n    void main() {\n\n      // gl_Position is a special variable a vertex shader\n      // is responsible for setting\n      gl_Position = a_position;\n      v_position = a_position;\n    }\n  ",this.source)),Jt(this,ee)}},{key:"vao",get:function(){return Jt(this,ne)||Zt(this,ne,function(t,e){var n=t.createVertexArray();t.bindVertexArray(n);var o=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0),n}(Jt(this,te),Jt(this,te).getAttribLocation(this.program,"a_position"))),Jt(this,ne)}},{key:"uniforms",get:function(){return Jt(this,oe)||Zt(this,oe,{resolution:Jt(this,te).getUniformLocation(this.program,"iResolution"),rot:Jt(this,te).getUniformLocation(this.program,"rot"),time:Jt(this,te).getUniformLocation(this.program,"iTime")}),Jt(this,oe)}}])&&Qt(e.prototype,n),o&&Qt(e,o),t}(),te=new WeakMap,ee=new WeakMap,ne=new WeakMap,oe=new WeakMap;function re(t){var e=t.getContext("webgl2");if(null!==e){return{render:function(t,n,i,a){e.viewport(0,0,e.canvas.width,e.canvas.height),e.useProgram(a.program),e.bindVertexArray(a.vao),e.uniform2f(a.uniforms.resolution,e.canvas.width,e.canvas.height);var s=o.create();o.fromXRotation(s,n.x+n.xSpeed*t),o.rotateY(s,s,n.y+n.ySpeed*t),o.rotateZ(s,s,n.z+n.zSpeed*t),o.translate(s,s,r.fromValues(i.x,i.y,i.z)),e.uniformMatrix4fv(a.uniforms.rot,!1,s),e.uniform1f(a.uniforms.time,t),e.drawArrays(e.TRIANGLES,0,6)},newShader:function(t){return new $t(t,e)}}}alert("Unable to initialize WebGL. Your browser or machine may not support it.")}},function(t,e,n){"use strict";function o(t,e){var n=t.__state.conversionName.toString(),o=Math.round(t.r),r=Math.round(t.g),i=Math.round(t.b),a=t.a,s=Math.round(t.h),l=t.s.toFixed(1),c=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var u=t.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===n?"rgb("+o+","+r+","+i+")":"CSS_RGBA"===n?"rgba("+o+","+r+","+i+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+r+","+i+"]":"RGBA_ARRAY"===n?"["+o+","+r+","+i+","+a+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+",a:"+a+"}":"unknown format"}var r=Array.prototype.forEach,i=Array.prototype.slice,a={BREAK:{},extend:function(t){return this.each(i.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(i.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=i.call(arguments);return function(){for(var e=i.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(r&&t.forEach&&t.forEach===r)t.forEach(e,n);else if(t.length===t.length+0){var o,i=void 0;for(i=0,o=t.length;i<o;i++)if(i in t&&e.call(n,t[i],i)===this.BREAK)return}else for(var a in t)if(e.call(n,t[a],a)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var o=void 0;return function(){var r=this,i=arguments;function a(){o=null,n||t.apply(r,i)}var s=n||!o;clearTimeout(o),o=setTimeout(a,e),s&&t.apply(r,i)}},toArray:function(t){return t.toArray?t.toArray():i.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},s=[{litmus:a.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:o},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:o},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:o},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:o}}},{litmus:a.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:a.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:a.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(a.isNumber(t.r)&&a.isNumber(t.g)&&a.isNumber(t.b)&&a.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(a.isNumber(t.r)&&a.isNumber(t.g)&&a.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(a.isNumber(t.h)&&a.isNumber(t.s)&&a.isNumber(t.v)&&a.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(a.isNumber(t.h)&&a.isNumber(t.s)&&a.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],l=void 0,c=void 0,u=function(){c=!1;var t=arguments.length>1?a.toArray(arguments):arguments[0];return a.each(s,(function(e){if(e.litmus(t))return a.each(e.conversions,(function(e,n){if(l=e.read(t),!1===c&&!1!==l)return c=l,l.conversionName=n,l.conversion=e,a.BREAK})),a.BREAK})),c},d=void 0,f={hsv_to_rgb:function(t,e,n){var o=Math.floor(t/60)%6,r=t/60-Math.floor(t/60),i=n*(1-e),a=n*(1-r*e),s=n*(1-(1-r)*e),l=[[n,s,i],[a,n,i],[i,n,s],[i,a,n],[s,i,n],[n,i,a]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(t,e,n){var o=Math.min(t,e,n),r=Math.max(t,e,n),i=r-o,a=void 0;return 0===r?{h:NaN,s:0,v:0}:(a=t===r?(e-n)/i:e===r?2+(n-t)/i:4+(t-e)/i,(a/=6)<0&&(a+=1),{h:360*a,s:i/r,v:r/255})},rgb_to_hex:function(t,e,n){var o=this.hex_with_component(0,2,t);return o=this.hex_with_component(o,1,e),o=this.hex_with_component(o,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(d=8*e)|t&~(255<<d)}},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_=function t(e,n,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},v=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},b=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},g=function(){function t(){if(p(this,t),this.__state=u.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return m(t,[{key:"toString",value:function(){return o(this)}},{key:"toHexString",value:function(){return o(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function y(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||g.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(g.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function x(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||g.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(g.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}g.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=f.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");a.extend(t.__state,f.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},g.recalculateHSV=function(t){var e=f.rgb_to_hsv(t.r,t.g,t.b);a.extend(t.__state,{s:e.s,v:e.v}),a.isNaN(e.h)?a.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},g.COMPONENTS=["r","g","b","h","s","v","hex","a"],y(g.prototype,"r",2),y(g.prototype,"g",1),y(g.prototype,"b",0),x(g.prototype,"h"),x(g.prototype,"s"),x(g.prototype,"v"),Object.defineProperty(g.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(g.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=f.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var w=function(){function t(e,n){p(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return m(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),E={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){a.each(t,(function(t){E[t]=e}))}));var S=/(\d+(\.\d+)?)px/;function M(t){if("0"===t||a.isUndefined(t))return 0;var e=t.match(S);return a.isNull(e)?0:parseFloat(e[1])}var A={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var o=n,r=e;a.isUndefined(r)&&(r=!0),a.isUndefined(o)&&(o=!0),t.style.position="absolute",r&&(t.style.left=0,t.style.right=0),o&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,o){var r=n||{},i=E[e];if(!i)throw new Error("Event type "+e+" not supported.");var s=document.createEvent(i);switch(i){case"MouseEvents":var l=r.x||r.clientX||0,c=r.y||r.clientY||0;s.initMouseEvent(e,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=s.initKeyboardEvent||s.initKeyEvent;a.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(e,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(e,r.bubbles||!1,r.cancelable||!0)}a.defaults(s,o),t.dispatchEvent(s)},bind:function(t,e,n,o){var r=o||!1;return t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),A},unbind:function(t,e,n,o){var r=o||!1;return t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),A},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return A},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),o=n.indexOf(e);-1!==o&&(n.splice(o,1),t.className=n.join(" "))}else t.className=void 0;return A},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return M(e["border-left-width"])+M(e["border-right-width"])+M(e["padding-left"])+M(e["padding-right"])+M(e.width)},getHeight:function(t){var e=getComputedStyle(t);return M(e["border-top-width"])+M(e["border-bottom-width"])+M(e["padding-top"])+M(e["padding-bottom"])+M(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},C=function(t){function e(t,n){p(this,e);var o=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),A.bind(o.__checkbox,"change",(function(){r.setValue(!r.__prev)}),!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return v(e,t),m(e,[{key:"setValue",value:function(t){var n=_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(w),k=function(t){function e(t,n,o){p(this,e);var r=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=o,s=r;if(r.__select=document.createElement("select"),a.isArray(i)){var l={};a.each(i,(function(t){l[t]=t})),i=l}return a.each(i,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)})),r.updateDisplay(),A.bind(r.__select,"change",(function(){var t=this.options[this.selectedIndex].value;s.setValue(t)})),r.domElement.appendChild(r.__select),r}return v(e,t),m(e,[{key:"setValue",value:function(t){var n=_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return A.isActive(this.__select)?this:(this.__select.value=this.getValue(),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(w),O=function(t){function e(t,n){p(this,e);var o=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=o;function i(){r.setValue(r.__input.value)}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),A.bind(o.__input,"keyup",i),A.bind(o.__input,"change",i),A.bind(o.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),A.bind(o.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return v(e,t),m(e,[{key:"updateDisplay",value:function(){return A.isActive(this.__input)||(this.__input.value=this.getValue()),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(w);function T(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var R=function(t){function e(t,n,o){p(this,e);var r=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=o||{};return r.__min=i.min,r.__max=i.max,r.__step=i.step,a.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=T(r.__impliedStep),r}return v(e,t),m(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=T(t),this}}]),e}(w);var L=function(t){function e(t,n,o){p(this,e);var r=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o));r.__truncationSuspended=!1;var i=r,s=void 0;function l(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}function c(t){var e=s-t.clientY;i.setValue(i.getValue()+e*i.__impliedStep),s=t.clientY}function u(){A.unbind(window,"mousemove",c),A.unbind(window,"mouseup",u),l()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),A.bind(r.__input,"change",(function(){var t=parseFloat(i.__input.value);a.isNaN(t)||i.setValue(t)})),A.bind(r.__input,"blur",(function(){l()})),A.bind(r.__input,"mousedown",(function(t){A.bind(window,"mousemove",c),A.bind(window,"mouseup",u),s=t.clientY})),A.bind(r.__input,"keydown",(function(t){13===t.keyCode&&(i.__truncationSuspended=!0,this.blur(),i.__truncationSuspended=!1,l())})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return v(e,t),m(e,[{key:"updateDisplay",value:function(){var t,n,o;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,o=Math.pow(10,n),Math.round(t*o)/o),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(R);function N(t,e,n,o,r){return o+(t-e)/(n-e)*(r-o)}var P=function(t){function e(t,n,o,r,i){p(this,e);var a=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:o,max:r,step:i})),s=a;function l(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(N(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function c(){A.unbind(window,"mousemove",l),A.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function u(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(N(e,n.left,n.right,s.__min,s.__max))}function d(){A.unbind(window,"touchmove",u),A.unbind(window,"touchend",d),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),A.bind(a.__background,"mousedown",(function(t){document.activeElement.blur(),A.bind(window,"mousemove",l),A.bind(window,"mouseup",c),l(t)})),A.bind(a.__background,"touchstart",(function(t){if(1!==t.touches.length)return;A.bind(window,"touchmove",u),A.bind(window,"touchend",d),u(t)})),A.addClass(a.__background,"slider"),A.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return v(e,t),m(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(R),z=function(t){function e(t,n,o){p(this,e);var r=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===o?"Fire":o,A.bind(r.__button,"click",(function(t){return t.preventDefault(),i.fire(),!1})),A.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return v(e,t),m(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(w),I=function(t){function e(t,n){p(this,e);var o=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));o.__color=new g(o.getValue()),o.__temp=new g(0);var r=o;o.domElement=document.createElement("div"),A.makeSelectable(o.domElement,!1),o.__selector=document.createElement("div"),o.__selector.className="selector",o.__saturation_field=document.createElement("div"),o.__saturation_field.className="saturation-field",o.__field_knob=document.createElement("div"),o.__field_knob.className="field-knob",o.__field_knob_border="2px solid ",o.__hue_knob=document.createElement("div"),o.__hue_knob.className="hue-knob",o.__hue_field=document.createElement("div"),o.__hue_field.className="hue-field",o.__input=document.createElement("input"),o.__input.type="text",o.__input_textShadow="0 1px 1px ",A.bind(o.__input,"keydown",(function(t){13===t.keyCode&&h.call(this)})),A.bind(o.__input,"blur",h),A.bind(o.__selector,"mousedown",(function(){A.addClass(this,"drag").bind(window,"mouseup",(function(){A.removeClass(r.__selector,"drag")}))})),A.bind(o.__selector,"touchstart",(function(){A.addClass(this,"drag").bind(window,"touchend",(function(){A.removeClass(r.__selector,"drag")}))}));var i,s=document.createElement("div");function l(t){_(t),A.bind(window,"mousemove",_),A.bind(window,"touchmove",_),A.bind(window,"mouseup",d),A.bind(window,"touchend",d)}function c(t){v(t),A.bind(window,"mousemove",v),A.bind(window,"touchmove",v),A.bind(window,"mouseup",f),A.bind(window,"touchend",f)}function d(){A.unbind(window,"mousemove",_),A.unbind(window,"touchmove",_),A.unbind(window,"mouseup",d),A.unbind(window,"touchend",d),m()}function f(){A.unbind(window,"mousemove",v),A.unbind(window,"touchmove",v),A.unbind(window,"mouseup",f),A.unbind(window,"touchend",f),m()}function h(){var t=u(this.value);!1!==t?(r.__color.__state=t,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function m(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function _(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,o=n.clientX,i=n.clientY,a=(o-e.left)/(e.right-e.left),s=1-(i-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),r.__color.v=s,r.__color.s=a,r.setValue(r.__color.toOriginal()),!1}function v(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return a.extend(o.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),a.extend(o.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:o.__field_knob_border+(o.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),a.extend(o.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),a.extend(o.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),a.extend(s.style,{width:"100%",height:"100%",background:"none"}),D(s,"top","rgba(0,0,0,0)","#000"),a.extend(o.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(i=o.__hue_field).style.background="",i.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",i.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.extend(o.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:o.__input_textShadow+"rgba(0,0,0,0.7)"}),A.bind(o.__saturation_field,"mousedown",l),A.bind(o.__saturation_field,"touchstart",l),A.bind(o.__field_knob,"mousedown",l),A.bind(o.__field_knob,"touchstart",l),A.bind(o.__hue_field,"mousedown",c),A.bind(o.__hue_field,"touchstart",c),o.__saturation_field.appendChild(s),o.__selector.appendChild(o.__field_knob),o.__selector.appendChild(o.__saturation_field),o.__selector.appendChild(o.__hue_field),o.__hue_field.appendChild(o.__hue_knob),o.domElement.appendChild(o.__input),o.domElement.appendChild(o.__selector),o.updateDisplay(),o}return v(e,t),m(e,[{key:"updateDisplay",value:function(){var t=u(this.getValue());if(!1!==t){var e=!1;a.each(g.COMPONENTS,(function(n){if(!a.isUndefined(t[n])&&!a.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&a.extend(this.__color.__state,t)}a.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;a.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,D(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),a.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),e}(w),F=["-moz-","-o-","-webkit-","-ms-",""];function D(t,e,n,o){t.style.background="",a.each(F,(function(r){t.style.cssText+="background: "+r+"linear-gradient("+e+", "+n+" 0%, "+o+" 100%); "}))}var B=function(t,e){var n=e||document,o=document.createElement("style");o.type="text/css",o.innerHTML=t;var r=n.getElementsByTagName("head")[0];try{r.appendChild(o)}catch(t){}},H='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',j=function(t,e){var n=t[e];return a.isArray(arguments[2])||a.isObject(arguments[2])?new k(t,e,arguments[2]):a.isNumber(n)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?a.isNumber(arguments[4])?new P(t,e,arguments[2],arguments[3],arguments[4]):new P(t,e,arguments[2],arguments[3]):a.isNumber(arguments[4])?new L(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new L(t,e,{min:arguments[2],max:arguments[3]}):a.isString(n)?new O(t,e):a.isFunction(n)?new z(t,e,""):a.isBoolean(n)?new C(t,e):null};var V=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},q=function(){function t(){p(this,t),this.backgroundElement=document.createElement("div"),a.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),A.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),a.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;A.bind(this.backgroundElement,"click",(function(){e.hide()}))}return m(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),a.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",A.unbind(t.domElement,"webkitTransitionEnd",e),A.unbind(t.domElement,"transitionend",e),A.unbind(t.domElement,"oTransitionEnd",e)};A.bind(this.domElement,"webkitTransitionEnd",e),A.bind(this.domElement,"transitionend",e),A.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-A.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-A.getHeight(this.domElement)/2+"px"}}]),t}();B(function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var U=function(){try{return!!window.localStorage}catch(t){return!1}}(),G=void 0,X=!0,Y=void 0,W=!1,K=[],Q=function t(e){var n=this,o=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),A.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=a.defaults(o,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),o=a.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),a.isUndefined(o.load)?o.load={preset:"Default"}:o.preset&&(o.load.preset=o.preset),a.isUndefined(o.parent)&&o.hideable&&K.push(this),o.resizable=a.isUndefined(o.parent)&&o.resizable,o.autoPlace&&a.isUndefined(o.scrollable)&&(o.scrollable=!0);var r,i=U&&"true"===localStorage.getItem(nt(this,"isLocal")),s=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(t){n.parent?n.getRoot().preset=t:o.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return o.width},set:function(t){o.width=t,st(n,t)}},name:{get:function(){return o.name},set:function(t){o.name=t,l&&(l.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(e){o.closed=e,o.closed?A.addClass(n.__ul,t.CLASS_CLOSED):A.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return i},set:function(t){U&&(i=t,t?A.bind(window,"unload",s):A.unbind(window,"unload",s),localStorage.setItem(nt(n,"isLocal"),t))}}}),a.isUndefined(o.parent)){if(this.closed=o.closed||!1,A.addClass(this.domElement,t.CLASS_MAIN),A.makeSelectable(this.domElement,!1),U&&i){n.useLocalStorage=!0;var c=localStorage.getItem(nt(this,"gui"));c&&(o.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,A.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),o.closeOnTop?(A.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(A.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),A.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===o.closed&&(o.closed=!0);var u=document.createTextNode(o.name);A.addClass(u,"controller-name"),l=J(n,u);A.addClass(this.__ul,t.CLASS_CLOSED),A.addClass(l,"title"),A.bind(l,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),o.closed||(this.closed=!1)}o.autoPlace&&(a.isUndefined(o.parent)&&(X&&(Y=document.createElement("div"),A.addClass(Y,"dg"),A.addClass(Y,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Y),X=!1),Y.appendChild(this.domElement),A.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||st(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},A.bind(window,"resize",this.__resizeHandler),A.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),A.bind(this.__ul,"transitionend",this.__resizeHandler),A.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&at(this),s=function(){U&&"true"===localStorage.getItem(nt(n,"isLocal"))&&localStorage.setItem(nt(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,o.parent||((r=n.getRoot()).width+=1,a.defer((function(){r.width-=1})))};function J(t,e,n){var o=document.createElement("li");return e&&o.appendChild(e),n?t.__ul.insertBefore(o,n):t.__ul.appendChild(o),t.onResize(),o}function Z(t){A.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&A.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function $(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function tt(t,e){var n=t.getRoot(),o=n.__rememberedObjects.indexOf(e.object);if(-1!==o){var r=n.__rememberedObjectIndecesToControllers[o];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[o]=r),r[e.property]=e,n.load&&n.load.remembered){var i=n.load.remembered,a=void 0;if(i[t.preset])a=i[t.preset];else{if(!i.Default)return;a=i.Default}if(a[o]&&void 0!==a[o][e.property]){var s=a[o][e.property];e.initialValue=s,e.setValue(s)}}}}function et(t,e,n,o){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var r=void 0;if(o.color)r=new I(e,n);else{var i=[e,n].concat(o.factoryArgs);r=j.apply(t,i)}o.before instanceof w&&(o.before=o.before.__li),tt(t,r),A.addClass(r.domElement,"c");var s=document.createElement("span");A.addClass(s,"property-name"),s.innerHTML=r.property;var l=document.createElement("div");l.appendChild(s),l.appendChild(r.domElement);var c=J(t,l,o.before);return A.addClass(c,Q.CLASS_CONTROLLER_ROW),r instanceof I?A.addClass(c,"color"):A.addClass(c,h(r.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,a.extend(n,{options:function(e){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:o,factoryArgs:[a.toArray(arguments)]})}if(a.isArray(e)||a.isObject(e)){var r=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:r,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof P){var o=new L(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});a.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],r=o[t];n[t]=o[t]=function(){var t=Array.prototype.slice.call(arguments);return r.apply(o,t),e.apply(n,t)}})),A.addClass(e,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof L){var r=function(e){if(a.isNumber(n.__min)&&a.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var i=et(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return i.name(o),r&&i.listen(),i}return e};n.min=a.compose(r,n.min),n.max=a.compose(r,n.max)}else n instanceof C?(A.bind(e,"click",(function(){A.fakeEvent(n.__checkbox,"click")})),A.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof z?(A.bind(e,"click",(function(){A.fakeEvent(n.__button,"click")})),A.bind(e,"mouseover",(function(){A.addClass(n.__button,"hover")})),A.bind(e,"mouseout",(function(){A.removeClass(n.__button,"hover")}))):n instanceof I&&(A.addClass(e,"color"),n.updateDisplay=a.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=a.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&$(t.getRoot(),!0),e}),n.setValue)}(t,c,r),t.__controllers.push(r),r}function nt(t,e){return document.location.href+"."+e}function ot(t,e,n){var o=document.createElement("option");o.innerHTML=e,o.value=e,t.__preset_select.appendChild(o),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function rt(t,e){e.style.display=t.useLocalStorage?"block":"none"}function it(t){var e=t.__save_row=document.createElement("li");A.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),A.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",A.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",A.addClass(o,"button"),A.addClass(o,"save");var r=document.createElement("span");r.innerHTML="New",A.addClass(r,"button"),A.addClass(r,"save-as");var i=document.createElement("span");i.innerHTML="Revert",A.addClass(i,"button"),A.addClass(i,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?a.each(t.load.remembered,(function(e,n){ot(t,n,n===t.preset)})):ot(t,"Default",!1),A.bind(s,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(s),e.appendChild(n),e.appendChild(o),e.appendChild(r),e.appendChild(i),U){var l=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(nt(0,"isLocal"))&&c.setAttribute("checked","checked"),rt(t,l),A.bind(c,"change",(function(){t.useLocalStorage=!t.useLocalStorage,rt(t,l)}))}var u=document.getElementById("dg-new-constructor");A.bind(u,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||G.hide()})),A.bind(n,"click",(function(){u.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),G.show(),u.focus(),u.select()})),A.bind(o,"click",(function(){t.save()})),A.bind(r,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),A.bind(i,"click",(function(){t.revert()}))}function at(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function o(){A.removeClass(t.__closeButton,Q.CLASS_DRAG),A.unbind(window,"mousemove",n),A.unbind(window,"mouseup",o)}function r(r){return r.preventDefault(),e=r.clientX,A.addClass(t.__closeButton,Q.CLASS_DRAG),A.bind(window,"mousemove",n),A.bind(window,"mouseup",o),!1}t.__resize_handle=document.createElement("div"),a.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),A.bind(t.__resize_handle,"mousedown",r),A.bind(t.__closeButton,"mousedown",r),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function st(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function lt(t,e){var n={};return a.each(t.__rememberedObjects,(function(o,r){var i={},s=t.__rememberedObjectIndecesToControllers[r];a.each(s,(function(t,n){i[n]=e?t.initialValue:t.getValue()})),n[r]=i})),n}Q.toggleHide=function(){W=!W,a.each(K,(function(t){t.domElement.style.display=W?"none":""}))},Q.CLASS_AUTO_PLACE="a",Q.CLASS_AUTO_PLACE_CONTAINER="ac",Q.CLASS_MAIN="main",Q.CLASS_CONTROLLER_ROW="cr",Q.CLASS_TOO_TALL="taller-than-window",Q.CLASS_CLOSED="closed",Q.CLASS_CLOSE_BUTTON="close-button",Q.CLASS_CLOSE_TOP="close-top",Q.CLASS_CLOSE_BOTTOM="close-bottom",Q.CLASS_DRAG="drag",Q.DEFAULT_WIDTH=245,Q.TEXT_CLOSED="Close Controls",Q.TEXT_OPEN="Open Controls",Q._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||Q.toggleHide()},A.bind(window,"keydown",Q._keydownHandler,!1),a.extend(Q.prototype,{add:function(t,e){return et(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return et(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;a.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Y.removeChild(this.domElement);var t=this;a.each(this.__folders,(function(e){t.removeFolder(e)})),A.unbind(window,"keydown",Q._keydownHandler,!1),Z(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new Q(e);this.__folders[t]=n;var o=J(this,n.domElement);return A.addClass(o,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],Z(t);var e=this;a.each(t.__folders,(function(e){t.removeFolder(e)})),a.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=A.getOffset(t.__ul).top,n=0;a.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=A.getHeight(e))})),window.innerHeight-e-20<n?(A.addClass(t.domElement,Q.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(A.removeClass(t.domElement,Q.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&a.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:a.debounce((function(){this.onResize()}),50),remember:function(){if(a.isUndefined(G)&&((G=new q).domElement.innerHTML=H),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;a.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&it(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&st(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=lt(this)),t.folders={},a.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=lt(this),$(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=lt(this,!0)),this.load.remembered[t]=lt(this),this.preset=t,ot(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){a.each(this.__controllers,(function(e){this.getRoot().load.remembered?tt(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),a.each(this.__folders,(function(t){t.revert(t)})),t||$(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&V.call(window,(function(){t(e)}));a.each(e,(function(t){t.updateDisplay()}))}(this.__listening)},updateDisplay:function(){a.each(this.__controllers,(function(t){t.updateDisplay()})),a.each(this.__folders,(function(t){t.updateDisplay()}))}});var ct={color:{Color:g,math:f,interpret:u},controllers:{Controller:w,BooleanController:C,OptionController:k,StringController:O,NumberController:R,NumberControllerBox:L,NumberControllerSlider:P,FunctionController:z,ColorController:I},dom:{dom:A},gui:{GUI:Q},GUI:Q};e.a=ct},function(t,e,n){"use strict";e.a='#version 300 es\nprecision highp float;\n\n// Constants\nconst float EPS = 2.0e-3;\nconst float MIN_STEP_D = 1.0e-2;\nconst vec3 AMB = vec3(0.5, 0.5, 0.5);\n\nconst float ETA = 1.5;\nconst float PI = 3.14159265;\n\n// reflection types\nconst int NONREFLECT = 1;\nconst int MIRRORREFLECT = 2;\nconst int GLASSREFLECT = 3;\n\nconst vec4 GLASSCOLOR = vec4(1.0, 0.5, 0.1, 1.0);\nconst vec4 MIRRORCOLOR = vec4(1.0, 0.3, 0.3, 1.0);\n\nconst vec3 MOD3 = vec3(.1031, .11369, .13787);\nconst float NOISE_PROPORTION = 0.85;\nconst float NOISE_FREQUENCY = 25.0;\nconst float NOISE_GRADIENT_MAGNITUDE = (1. * NOISE_FREQUENCY * 1.32);\n\n// Uniforms\nuniform vec2 iResolution;\nuniform mat4 rot;\nuniform float iTime;\n\n// Input and Output\nin vec4 v_position;\nout vec4 outColor;\n\n// Structs\nstruct Ray {\n  vec3 origin;\n  vec3 direction;\n};\n\nstruct Material {\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float shininess;\n  int reflectType;\n};\n\nstruct Light {\n  vec3 pos;\n  vec3 color;\n  float intensity;\n  float attenuate;\n};\n\n// Represents an intersection in the scene after marching\nstruct Hit {\n  float dist;    // distance to nearest object\n  vec3 p;        // point of intersection in world coords\n  Material mat;  // Material of nearest object\n};\n\nvec3 hash3(vec3 p3) {\n\tp3 = fract(p3 * MOD3);\n  p3 += dot(p3, p3.yxz + 19.19);\n  return -1. + 2. * fract(vec3((p3.x + p3.y) * p3.z, (p3.x+p3.z) * p3.y, (p3.y+p3.z) * p3.x));\n}\n\nfloat perlin_noise(vec3 p) {\n  vec3 pi = floor(p);\n  vec3 pf = p - pi;  \n  vec3 w = pf * pf * (3. - 2. * pf);\n    \n  return \tmix(\n    \t      mix(\n              mix(\n                dot(pf - vec3(0, 0, 0), hash3(pi + vec3(0, 0, 0))), \n                dot(pf - vec3(1, 0, 0), hash3(pi + vec3(1, 0, 0))),\n                w.x),\n              mix(\n                dot(pf - vec3(0, 0, 1), hash3(pi + vec3(0, 0, 1))), \n                dot(pf - vec3(1, 0, 1), hash3(pi + vec3(1, 0, 1))),\n                w.x),\n    \t      w.z),\n            mix(\n              mix(\n                dot(pf - vec3(0, 1, 0), hash3(pi + vec3(0, 1, 0))), \n                dot(pf - vec3(1, 1, 0), hash3(pi + vec3(1, 1, 0))),\n                w.x),\n              mix(\n                dot(pf - vec3(0, 1, 1), hash3(pi + vec3(0, 1, 1))), \n                dot(pf - vec3(1, 1, 1), hash3(pi + vec3(1, 1, 1))),\n                w.x),\n     \t      w.z),\n\t        w.y);\n}\n\n// Primitives\n// All primitives take the point as the first argument, followed by other\n// parameters of the shape. They are all centered at the origin.\n\n// r is the radius of the sphere\nfloat sdSphere(vec3 p, float r) {\n  return length(p)-r;\n}\n\nfloat sdNoisySphere(vec3 p, float r, float noiseProp) {\n  float prop = 1. - noiseProp;\n  float noise = perlin_noise(p * NOISE_FREQUENCY) / NOISE_GRADIENT_MAGNITUDE;\n\treturn mix(sdSphere(p, r), noise, prop);\n}\n\n// b is the corner of the box in the positive quadrant\nfloat sdBox(vec3 p, vec3 b) {\n  vec3 q = abs(p) - b;\n  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);\n}\n\n// r determine rounded-ness\nfloat sdRoundBox(vec3 p, vec3 b, float r) {\n  vec3 q = abs(p) - b;\n  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0) - r;\n}\n\n// h is the height of the cylinder and r is the radius\nfloat sdCappedCylinder(vec3 p, float h, float r) {\n  vec2 d = abs(vec2(length(p.xz),p.y)) - vec2(r,h);\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0));\n}\n\nfloat sdRoundedCylinder(vec3 p, float ra, float rb, float h) {\n  vec2 d = vec2( length(p.xz)-2.0*ra+rb, abs(p.y) - h );\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0)) - rb;\n}\n\n// n is the normal to the plane, with the w coordinate the distance from the\n// origin\nfloat sdPlane(vec3 p, vec4 n) {\n  return dot(p, n.xyz) + n.w;\n}\n\nfloat sdTorus(vec3 p, vec2 t) {\n  vec2 q = vec2(length(p.xz) - t.x, p.y);\n  return length(q) - t.y;\n}\n\nvec4 opElongate(in vec3 p, in vec3 h) {\n  // return vec3(p-clamp(p,-h,h), 0.0); // faster, but produces zero in the interior elongated box\n  vec3 q = abs(p)-h;\n  return vec4(max(q,0.0), min(max(q.x,max(q.y,q.z)), 0.0)); \n}\n\nfloat sdElongatedTorus(vec3 p, vec3 h, vec2 t) {\n  vec4 w = opElongate(p, h);\n  return w.w + sdTorus(w.xyz, t);\n}\n\nfloat sdLink(vec3 p, float le, float r1, float r2) {\n  vec3 q = vec3( p.x, max(abs(p.y) - le,0.0), p.z );\n  return length(vec2(length(q.xy) - r1, q.z)) - r2;\n}\n\nfloat sdEllipsoid(vec3 p, vec3 r) {\n  float k0 = length(p / r);\n  float k1 = length(p / (r*r));\n  return k0 * (k0 - 1.0) / k1;\n}\n\nfloat sdCone( in vec3 p, in vec2 c, in float h) {\n  float q = length(p.xz);\n  float d1 = -p.y-h;\n  float d2 = max( dot(vec2(q,p.y),c), p.y);\n  return length(max(vec2(d1,d2),0.0)) + min(max(d1,d2), 0.);\n}\n\nfloat sdPyramid(vec3 p, float h) {\n  float m2 = h*h + 0.25;\n    \n  p.xz = abs(p.xz);\n  p.xz = (p.z>p.x) ? p.zx : p.xz;\n  p.xz -= 0.5;\n\n  vec3 q = vec3( p.z, h*p.y - 0.5*p.x, h*p.x + 0.5*p.y);\n   \n  float s = max(-q.x,0.0);\n  float t = clamp( (q.y-0.5*p.z)/(m2+0.25), 0.0, 1.0 );\n  float a = m2*(q.x+s)*(q.x+s) + q.y*q.y;\n  float b = m2*(q.x+0.5*t)*(q.x+0.5*t) + (q.y-m2*t)*(q.y-m2*t);   \n  float d2 = min(q.y,-q.x*m2-q.y*0.5) > 0.0 ? 0.0 : min(a,b);\n\n  return sqrt( (d2+q.z*q.z)/m2 ) * sign(max(q.z,-p.y));\n}\n\nfloat opOnion(float d, float h) {\n    return abs(d)-h;\n}\n\n// Operations\n// The operations act on the domain, and so have the inverse effect on the\n// image. That\'s why opTx subtracts instead of adding. In addition, that means\n// you have to apply them in the opposite order, so opTx(rotate(p)) would\n// translate and then rotate.\n\n// Translate by d\nvec3 opTx(vec3 p, vec3 d) {\n  return p-d;\n}\n\nvec3 opScale(vec3 p, float s) {\n  return p / s;\n}\n\nfloat opSmoothU(float d1, float d2, float k) {\n  float h = clamp( 0.5 + 0.5*(d2-d1)/k, 0.0, 1.0 );\n  return mix( d2, d1, h ) - k*h*(1.0-h);\n}\n\nfloat opSmoothSub(float d1, float d2, float k) {\n  float h = clamp( 0.5 - 0.5*(d2+d1)/k, 0.0, 1.0 );\n  return mix( d2, -d1, h ) + k*h*(1.0-h);\n}\n\nfloat opSmoothIntersect(float d1, float d2, float k) {\n  float h = max(k-abs(d1-d2),0.0);\n  return max(d1, d2) + h*h*0.25/k;\n  /* float h = clamp( 0.5 - 0.5*(d2-d1)/k, 0.0, 1.0 );\n  return mix( d2, d1, h ) + k*h*(1.0-h); */\n}\n\nvec3 opInf(vec3 p, vec3 c) {\n  return mod(p+0.5*c,c)-0.5*c;\n}\n\nvec3 opFiniteRep(vec3 p, vec3 c, vec3 l) {\n  return p-c*clamp(round(p/c),-l,l);\n}\n\n\n// Rotate around a coordinate axis (i.e. in a plane perpendicular to that\n// axis) by angle <a>.\n// Read like this: R(p.xz, a) rotates "x towards z".\n// This is fast if <a> is a compile-time constant and slower (but still\n// practical) if not.\nvoid opRot(inout vec2 p, float a) {\n  p = cos(a)*p + sin(a)*vec2(p.y, -p.x);\n}\n\nvec3 opRotX(vec3 p, float a) {\n  opRot(p.yz, a);\n  return p;\n}\n\nvec3 opRotY(vec3 p, float a) {\n  opRot(p.xz, a);\n  return p;\n}\n\nvec3 opRotZ(vec3 p, float a) {\n  opRot(p.xy, a);\n  return p;\n}\n\nvec3 opBend(in vec3 p, float k) {\n  float c = cos(k*p.y);\n  float s = sin(k*p.y);\n  mat2  m = mat2(c,-s,s,c);\n  return vec3(m*p.xy,p.z);\n}\n\nvec3 opTwist(in vec3 p, float k) {\n  float c = cos(k*p.y);\n  float s = sin(k*p.y);\n  mat2  m = mat2(c,-s,s,c);\n  return vec3(m*p.xz,p.y);\n}\n\nfloat opNoise(vec3 p, float v, float noiseProp) {\n  float prop = 1. - noiseProp;\n  float noise = perlin_noise(p * NOISE_FREQUENCY) / NOISE_GRADIENT_MAGNITUDE;\n  return mix(v, noise, prop);\n}\n\n// produces n-1 steps of a staircase:\nfloat opUnionStairs(float a, float b, float r, float n) {\n\tfloat s = r/n;\n\tfloat u = b-r;\n\treturn min(min(a,b), 0.5 * (u + a + abs ((mod (u - a + s, 2. * s)) - s)));\n}\n\n// We can just call Union since stairs are symmetric.\nfloat opIntersectionStairs(float a, float b, float r, float n) {\n\treturn -opUnionStairs(-a, -b, r, n);\n}\n\nfloat opDifferenceStairs(float a, float b, float r, float n) {\n\treturn -opUnionStairs(-a, b, r, n);\n}\n\nvec3 opModPolar(inout vec3 p, float repetitions) {\n  float z = p.z;\n\tfloat angle = 2.*PI/repetitions;\n\tfloat a = atan(p.y, p.x) + angle/2.;\n\tfloat r = length(p);\n\tfloat c = floor(a/angle);\n\ta = mod(a,angle) - angle/2.;\n\tp = vec3(cos(a), sin(a), z)*r;\n\t// For an odd number of repetitions, fix cell index of the cell in -x direction\n\t// (cell index would be e.g. -5 and 5 in the two halves of the cell):\n\t// if (abs(c) >= (repetitions/2.)) c = abs(c);\n\t// return c;\n  return p;\n}\n'},function(t,e,n){"use strict";e.a="// Calculate a fresnel term for reflections\nfloat calcFresnelTerm(in Ray ray, in vec3 n, in float power) {\n  float fresnel = min(1., dot(ray.direction, n) + 1.0);\n  fresnel = pow(fresnel, power);\n  return fresnel;\n}\n\nvec3 calcNormal(vec3 p) {\n  const vec2 eps = vec2(0.001, 0.0);\n\n  Material mat;\n\n  vec3 n = vec3(\n      sdf(p + eps.xyy, mat) - sdf(p - eps.xyy, mat),\n      sdf(p + eps.yxy, mat) - sdf(p - eps.yxy, mat),\n      sdf(p + eps.yyx, mat) - sdf(p - eps.yyx, mat));\n\n  return normalize(n);\n}\n\nHit march(Ray r) {\n  Material mat;\n  vec3 p = r.origin;\n  vec3 dir = r.direction;\n  float dist;\n\n  for (int i = 0; i < MAX_STEPS; i++) {\n    dist = sdf(p, mat);\n    if (dist < EPS) {\n      if (mat.reflectType == MIRRORREFLECT) {\n        vec3 norm = calcNormal(p);\n        dir = reflect(dir, norm);\n        p += norm * EPS * 2.0;\n      } else if (mat.reflectType == GLASSREFLECT) {\n        vec3 norm = calcNormal(p);\n        dir = refract(dir, norm, 1./ETA);\n        p -= norm * 2.0 * EPS;  // Make sure we're in the object\n        for (; i < MAX_STEPS; i++) {\n          dist = sdf(p, mat);\n          if (dist > EPS) break;\n          p -= dir * min(dist, -MIN_STEP_D);\n        }\n        // Refract again\n        norm = calcNormal(p);\n        dir = refract(dir, -norm, ETA);\n      } else break;\n    }\n    p += dir * max(dist, MIN_STEP_D);\n  }\n\n  return Hit(dist, p, mat);\n}\n\nvec3 phongContrib(Hit h, vec3 eye, Light l, vec3 N) {\n  vec3 L = normalize(l.pos - h.p);\n  vec3 V = normalize(eye - h.p);\n  vec3 R = normalize(-reflect(L, N));\n\n  vec3 diffuse = max(0.0, dot(L, N)) * h.mat.diffuse * l.color;\n  vec3 specular = pow(max(0.0, dot(R, V)), h.mat.shininess) * h.mat.specular * l.color;\n\n  return diffuse + specular;\n}\n\nfloat shadow(Light l, vec3 p, float w) {\n  // At most, need to step all the way to the light\n  float maxt = length(l.pos - p);\n  // Direction towards point\n  vec3 dir = normalize(l.pos - p);\n  // Ratio for soft shadows\n  float ratio = 1.0;\n  // March ray towards light\n  float t = EPS;\n  // Dummy material for sdf\n  Material mat;\n  // Previous step's data\n  // float prev_d = EPS;\n  // float prev_t = EPS;\n  for (int i = 0; i < MAX_STEPS; i++) {\n    float dist = sdf(p + dir*t, mat);\n    // Calculate the closest distance\n    // float lent = d*d/(2.0*prev_d);\n    // float dist = sqrt(d*d - lent*lent);\n    ratio = min(ratio, dist/(log(t * w + 1.0)));\n    if (ratio < 0.0 || t >= maxt) break;\n    // prev_d = d;\n    // prev_t = t;\n    t += dist;\n  }\n  ratio = max(ratio, -1.0);\n  return smoothstep(0.0,1.0,ratio);\n}\n\n// Calculate a color for a particular eye, hitting at a point in the scene\nvec3 calcColor(Hit hit, vec3 eye) {\n  vec3 color = AMB * hit.mat.ambient;\n  vec3 norm = calcNormal(hit.p);\n  for (int i = 0; i < N_LIGHTS; i++) {\n    Light l = lights[i];\n    float ratio = shadow(l, hit.p + norm*0.01, 0.1);\n    color += phongContrib(hit, eye, l, norm) * ratio;\n  }\n  return color;\n}\n\nvoid main() {\n  // Initialize\n  init();\n\n  // Convert to [-1, 1] screen coordinates\n  float cameraFOV = 0.5;\n  vec3 direction = vec3(v_position.x * cameraFOV * iResolution.x/iResolution.y,\n      v_position.y * cameraFOV, 1.0);\n\n  // Apply rotations/translations to our origin and direction vectors. Note how\n  // we DO NOT translate the direction by setting the w to 0.0\n  vec3 eye = vec3(rot * vec4(0.0, 0.0, -25.0, 1.0));\n  vec3 dir = normalize(vec3(rot * vec4(direction, 0.0)));\n  Ray ray = Ray(eye, dir);\n\n  // Find intersection\n  Hit hit = march(ray);\n\n  // Didn't hit anything\n  if (hit.dist > MAX_DISTANCE) {\n    outColor = BACKGROUND_COLOR;\n    return;\n  }\n  // Calculate color and apply gamma correction\n  outColor = vec4(pow(calcColor(hit, eye), vec3(1.0/2.2)), 1);\n}\n"},function(t,e,n){var o;t.exports=((o=function(){function t(t){return r.appendChild(t.dom),t}function e(t){for(var e=0;e<r.children.length;e++)r.children[e].style.display=e===t?"block":"none";n=t}var n=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(t){t.preventDefault(),e(++n%r.children.length)}),!1);var i=(performance||Date).now(),a=i,s=0,l=t(new o.Panel("FPS","#0ff","#002")),c=t(new o.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new o.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:r,addPanel:t,showPanel:e,begin:function(){i=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(c.update(t-i,200),t>a+1e3&&(l.update(1e3*s/(t-a),100),a=t,s=0,u)){var e=performance.memory;u.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){i=this.end()},domElement:r,setMode:e}}).Panel=function(t,e,n){var o=1/0,r=0,i=Math.round,a=i(window.devicePixelRatio||1),s=80*a,l=48*a,c=3*a,u=2*a,d=3*a,f=15*a,h=74*a,p=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var _=m.getContext("2d");return _.font="bold "+9*a+"px Helvetica,Arial,sans-serif",_.textBaseline="top",_.fillStyle=n,_.fillRect(0,0,s,l),_.fillStyle=e,_.fillText(t,c,u),_.fillRect(d,f,h,p),_.fillStyle=n,_.globalAlpha=.9,_.fillRect(d,f,h,p),{dom:m,update:function(l,v){o=Math.min(o,l),r=Math.max(r,l),_.fillStyle=n,_.globalAlpha=1,_.fillRect(0,0,s,f),_.fillStyle=e,_.fillText(i(l)+" "+t+" ("+i(o)+"-"+i(r)+")",c,u),_.drawImage(m,d+a,f,h-a,p,d,f,h-a,p),_.fillRect(d+h-a,f,a,p),_.fillStyle=n,_.globalAlpha=.9,_.fillRect(d+h-a,f,a,i((1-l/v)*p))}}},o)},,,,,,,,function(t,e,n){"use strict";n.r(e);var o=n(4),r=n.n(o),i=n(0),a=n(1);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"shader",void 0),s(this,"cameraAngles",{x:.5,y:.1,z:0,xSpeed:0,ySpeed:0,zSpeed:0}),s(this,"cameraPos",{x:0,y:0,z:0})};var c=n(2),u=n(3);function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var h={recur1:c.a+"const int MAX_STEPS = 100;\nconst float MAX_DISTANCE = 5.0;\nconst vec4 BACKGROUND_COLOR = vec4(0.4, 0.4, 0.4, 1);\n\n// Lights\nconst int N_LIGHTS = 2;\n\n// Frame/pixel globals\nfloat t1 = 0.0;\n// Constant movement between two values based on iTime\nfloat smooth_time(float low, float upp, float rate) {\n  float dif = upp - low;\n  return abs(mod(iTime*rate - dif, 2.*dif) - dif) + low;\n}\n// Initialize frame/pixel globals\nvoid init() {\n  t1 = smooth_time(1.85, 10., 0.5);\n}\n\nLight lights[N_LIGHTS] =\nLight[N_LIGHTS](\n    Light(vec3(20,5,20), vec3(1,1,1), 1.0, 1.0),\n    Light(vec3(-20,5,-20), vec3(0.2,1,1), 1.0, 1.0));\n\nfloat min_mat(float d1, float d2, Material m1, Material m2, out Material rm) {\n  if (d1 < d2) {\n    rm = m1;\n    return d1;\n  }\n  rm = m2;\n  return d2;\n}\n\n// Minorly interesting operation that could be added to rounded things\n// p = opBend(p, (t1-2.)/4.);\n// float d = sdRoundBox(p, vec3(1.5), 2.5);\n// mat = Material(vec3(0.8,0.2,0), vec3(0.8,0.2,0), vec3(0.8,0.2,0), 10.0, NONREFLECT);\n\n// float c = sdBox(p, vec3(t1)*1.2);\n\n// float s = max(d, -c);\n\n// if (d < s) {\n//   d = s;\n//   vec3 col = vec3(.2);\n//   mat = Material(col, col, col, 10.0, NONREFLECT);\n//  }\n\n\nfloat rec(vec3 p, vec3 sz, out Material mat) {\n  vec3 col = vec3(.2);\n  float d = sdBox(p, sz);\n  mat = Material(col, col*1.2, col, 10.0, NONREFLECT);\n\n  float s = 1.;\n  \n  for (int m = 0; m < 2; m++) {\n\n    opRot(p.xy, .2);\n    opRot(p.yz, .2);\n    vec3 a = mod(p*s, 3.) - 1.5;\n    s *= 3.;\n    vec3 r = abs(1.0 - 3.0*abs(a));\n\n    float da = max(r.x,r.y);\n    float db = max(r.y,r.z);\n    float dc = max(r.z,r.x);\n    float c = (min(da,min(db,dc))-1.0)/s;\n\n    d = max(c, d);\n    // if (c > d) {\n    //   d = c;\n    //   mat = Material(col, col, col, 10.0, NONREFLECT);\n    // }\n  }\n  return d;\n}\n\nfloat sdf(vec3 p, out Material mat) {\n  float d1 = rec(p, vec3(2., 2., t1), mat);\n  float d2 = rec(p, vec3(2., t1, 2.), mat);\n  float d3 = rec(p, vec3(t1, 2., 2.), mat);\n  return opSmoothU(opSmoothU(d1, d2, 1.), d3, 1.);\n}\n"+u.a,seaSquid:c.a+"const int MAX_STEPS = 120;\nconst float MAX_DISTANCE = 5.0;\nconst vec4 BACKGROUND_COLOR = vec4(0.4, 0.4, 0.4, 1);\n\n// Lights\nconst int N_LIGHTS = 2;\n\n// Frame/pixel globals\nfloat t1 = 0.0;\nfloat t2 = 0.0;\nfloat t3 = 0.0;\n// Initialize frame/pixel globals\nvoid init() {\n  t1 = abs(mod(iTime*0.5 - 1.57, 3.14) - 1.57) - .77;\n  t2 = abs(mod(iTime*0.5 - .77, 1.57) - .77) - .36;\n  t3 = abs(mod(iTime*2.0, 10.0) - 5.0);\n}\n\nLight lights[N_LIGHTS] =\nLight[N_LIGHTS](\n    Light(vec3(20,5,20), vec3(1,1,1), 1.0, 1.0),\n    Light(vec3(-20,5,-20), vec3(0.2,1,1), 1.0, 1.0));\n\nfloat min_mat(float d1, float d2, Material m1, Material m2, out Material rm) {\n  if (d1 < d2) {\n    rm = m1;\n    return d1;\n  }\n  rm = m2;\n  return d2;\n}\n\nfloat sdf(vec3 p, out Material mat) {\n  // Make the sea squirt\n  vec3 p_b = opBend(opRotX(opTx(p, vec3(0, 4, 0)), t1), t2);\n  vec3 sz = vec3(1, t3, 1.0);\n  vec3 p_s = opBend(opRotX(opTx(p, vec3(0, 4.0, 0)), t1), t2);\n  float ssD = opSmoothU(\n      opSmoothSub(sdBox(p_b, sz), sdSphere(p_s, sz.y), 1.3),\n      sdSphere(opTx(p, vec3(0, 0, 0)), 5.0),\n      1.3);\n  Material ssM =\n    Material(vec3(0.8,0.2,0), vec3(0.8,0.2,0), vec3(0.8,0.2,0), 10.0, NONREFLECT);\n\n  // Make a test sphere for reflection//refraction\n  float sphD = sdSphere(opTx(p, vec3(8, 3, 8)), 3.0);\n  Material sphM =\n    Material(vec3(0.2,0.6,0.3), vec3(0.2,0.6,0.3), vec3(0.2,0.6,0.3), 10.0, GLASSREFLECT);\n\n  // Make an open box\n  float x = min(sdPlane(p, vec4(1, 0, 0, 40)),   sdPlane(p, vec4(-1, 0, 0, 40)));\n  float y = min(sdPlane(p, vec4(0, 1, 0, 3)),    sdPlane(p, vec4(0, -1, 0, 30)));\n  float z = min(sdPlane(p, vec4(0, 0, -1, 100)), sdPlane(p, vec4(0, 0, 1, 40)));\n  float boxD = min(min(x,y),z);\n  Material boxM = Material(vec3(0.0,0.4, 0.6), vec3(0.0,0.4, 0.6), vec3(0.0,0.4, 0.6), 10.0, NONREFLECT);\n\n  return min_mat(min_mat(ssD, boxD, ssM, boxM, mat), sphD, mat, sphM, mat);\n}\n"+u.a,rainbow:"#version 300 es\nprecision highp float;\n\nuniform vec2 iResolution;\n\n// we need to declare an output for the fragment shader\nout vec4 outColor;\n\nvoid main() {\n  outColor = vec4(fract(gl_FragCoord.xy / iResolution), 0, 1);\n}\n\n"};window.onload=function(){var t=document.getElementById("canvas"),e=Object(i.a)(t),n=e.render,o=e.newShader,s=Object.fromEntries(Object.entries(h).map((function(t){var e=d(t,2),n=e[0],r=e[1];return[n,o(r)]}))),c=function(t){var e=new l;e.shader=t[0];var n=new a.a.GUI,o=(n.add(e,"shader",t),n.addFolder("cameraAngle"));o.add(e.cameraAngles,"x",0,2*Math.PI),o.add(e.cameraAngles,"y",0,2*Math.PI),o.add(e.cameraAngles,"z",0,2*Math.PI),o.add(e.cameraAngles,"xSpeed",0,1),o.add(e.cameraAngles,"ySpeed",0,1),o.add(e.cameraAngles,"zSpeed",0,1);var r=n.addFolder("cameraPos");return r.add(e.cameraPos,"x"),r.add(e.cameraPos,"y"),r.add(e.cameraPos,"z"),e}(Object.keys(s)),u=new r.a;u.showPanel(0),document.body.appendChild(u.dom),window.requestAnimationFrame((function t(e){var o=.001*e;u.begin(),n(o,c.cameraAngles,c.cameraPos,s[c.shader]),u.end(),window.requestAnimationFrame(t)}));var f=function(){var e=t.clientWidth,n=t.clientHeight;t.width===e&&t.height===n||(t.width=e,t.height=n);var o=window;o.innerHeight,o.innerWidth};f(),window.addEventListener("resize",f,!1)}}]);
//# sourceMappingURL=index.ed3c0a64e2636b48ff1a.js.map