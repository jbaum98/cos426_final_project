!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/cos426_final_project/",n(n.s=13)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return ie}));var o={};n.r(o),n.d(o,"create",(function(){return c})),n.d(o,"clone",(function(){return l})),n.d(o,"copy",(function(){return u})),n.d(o,"fromValues",(function(){return d})),n.d(o,"set",(function(){return h})),n.d(o,"identity",(function(){return f})),n.d(o,"transpose",(function(){return p})),n.d(o,"invert",(function(){return m})),n.d(o,"adjoint",(function(){return _})),n.d(o,"determinant",(function(){return v})),n.d(o,"multiply",(function(){return g})),n.d(o,"translate",(function(){return b})),n.d(o,"scale",(function(){return y})),n.d(o,"rotate",(function(){return x})),n.d(o,"rotateX",(function(){return w})),n.d(o,"rotateY",(function(){return C})),n.d(o,"rotateZ",(function(){return E})),n.d(o,"fromTranslation",(function(){return k})),n.d(o,"fromScaling",(function(){return S})),n.d(o,"fromRotation",(function(){return A})),n.d(o,"fromXRotation",(function(){return M})),n.d(o,"fromYRotation",(function(){return O})),n.d(o,"fromZRotation",(function(){return T})),n.d(o,"fromRotationTranslation",(function(){return R})),n.d(o,"fromQuat2",(function(){return F})),n.d(o,"getTranslation",(function(){return P})),n.d(o,"getScaling",(function(){return L})),n.d(o,"getRotation",(function(){return z})),n.d(o,"fromRotationTranslationScale",(function(){return N})),n.d(o,"fromRotationTranslationScaleOrigin",(function(){return I})),n.d(o,"fromQuat",(function(){return B})),n.d(o,"frustum",(function(){return D})),n.d(o,"perspective",(function(){return H})),n.d(o,"perspectiveFromFieldOfView",(function(){return j})),n.d(o,"ortho",(function(){return V})),n.d(o,"lookAt",(function(){return U})),n.d(o,"targetTo",(function(){return q})),n.d(o,"str",(function(){return G})),n.d(o,"frob",(function(){return X})),n.d(o,"add",(function(){return W})),n.d(o,"subtract",(function(){return Y})),n.d(o,"multiplyScalar",(function(){return K})),n.d(o,"multiplyScalarAndAdd",(function(){return Q})),n.d(o,"exactEquals",(function(){return J})),n.d(o,"equals",(function(){return Z})),n.d(o,"mul",(function(){return $})),n.d(o,"sub",(function(){return tt}));var i={};n.r(i),n.d(i,"create",(function(){return et})),n.d(i,"clone",(function(){return nt})),n.d(i,"length",(function(){return ot})),n.d(i,"fromValues",(function(){return it})),n.d(i,"copy",(function(){return rt})),n.d(i,"set",(function(){return at})),n.d(i,"add",(function(){return st})),n.d(i,"subtract",(function(){return ct})),n.d(i,"multiply",(function(){return lt})),n.d(i,"divide",(function(){return ut})),n.d(i,"ceil",(function(){return dt})),n.d(i,"floor",(function(){return ht})),n.d(i,"min",(function(){return ft})),n.d(i,"max",(function(){return pt})),n.d(i,"round",(function(){return mt})),n.d(i,"scale",(function(){return _t})),n.d(i,"scaleAndAdd",(function(){return vt})),n.d(i,"distance",(function(){return gt})),n.d(i,"squaredDistance",(function(){return bt})),n.d(i,"squaredLength",(function(){return yt})),n.d(i,"negate",(function(){return xt})),n.d(i,"inverse",(function(){return wt})),n.d(i,"normalize",(function(){return Ct})),n.d(i,"dot",(function(){return Et})),n.d(i,"cross",(function(){return kt})),n.d(i,"lerp",(function(){return St})),n.d(i,"hermite",(function(){return At})),n.d(i,"bezier",(function(){return Mt})),n.d(i,"random",(function(){return Ot})),n.d(i,"transformMat4",(function(){return Tt})),n.d(i,"transformMat3",(function(){return Rt})),n.d(i,"transformQuat",(function(){return Ft})),n.d(i,"rotateX",(function(){return Pt})),n.d(i,"rotateY",(function(){return Lt})),n.d(i,"rotateZ",(function(){return zt})),n.d(i,"angle",(function(){return Nt})),n.d(i,"zero",(function(){return It})),n.d(i,"str",(function(){return Bt})),n.d(i,"exactEquals",(function(){return Dt})),n.d(i,"equals",(function(){return Ht})),n.d(i,"sub",(function(){return Vt})),n.d(i,"mul",(function(){return Ut})),n.d(i,"div",(function(){return qt})),n.d(i,"dist",(function(){return Gt})),n.d(i,"sqrDist",(function(){return Xt})),n.d(i,"len",(function(){return Wt})),n.d(i,"sqrLen",(function(){return Yt})),n.d(i,"forEach",(function(){return Kt}));var r=1e-6,a="undefined"!=typeof Float32Array?Float32Array:Array,s=Math.random;Math.PI;function c(){var t=new a(16);return a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function l(t){var e=new a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,n,o,i,r,s,c,l,u,d,h,f,p,m,_){var v=new a(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=o,v[4]=i,v[5]=r,v[6]=s,v[7]=c,v[8]=l,v[9]=u,v[10]=d,v[11]=h,v[12]=f,v[13]=p,v[14]=m,v[15]=_,v}function h(t,e,n,o,i,r,a,s,c,l,u,d,h,f,p,m,_){return t[0]=e,t[1]=n,t[2]=o,t[3]=i,t[4]=r,t[5]=a,t[6]=s,t[7]=c,t[8]=l,t[9]=u,t[10]=d,t[11]=h,t[12]=f,t[13]=p,t[14]=m,t[15]=_,t}function f(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p(t,e){if(t===e){var n=e[1],o=e[2],i=e[3],r=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=o,t[9]=r,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function m(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],_=e[14],v=e[15],g=n*s-o*a,b=n*c-i*a,y=n*l-r*a,x=o*c-i*s,w=o*l-r*s,C=i*l-r*c,E=u*m-d*p,k=u*_-h*p,S=u*v-f*p,A=d*_-h*m,M=d*v-f*m,O=h*v-f*_,T=g*O-b*M+y*A+x*S-w*k+C*E;return T?(T=1/T,t[0]=(s*O-c*M+l*A)*T,t[1]=(i*M-o*O-r*A)*T,t[2]=(m*C-_*w+v*x)*T,t[3]=(h*w-d*C-f*x)*T,t[4]=(c*S-a*O-l*k)*T,t[5]=(n*O-i*S+r*k)*T,t[6]=(_*y-p*C-v*b)*T,t[7]=(u*C-h*y+f*b)*T,t[8]=(a*M-s*S+l*E)*T,t[9]=(o*S-n*M-r*E)*T,t[10]=(p*w-m*y+v*g)*T,t[11]=(d*y-u*w-f*g)*T,t[12]=(s*k-a*A-c*E)*T,t[13]=(n*A-o*k+i*E)*T,t[14]=(m*b-p*x-_*g)*T,t[15]=(u*x-d*b+h*g)*T,t):null}function _(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],_=e[14],v=e[15];return t[0]=s*(h*v-f*_)-d*(c*v-l*_)+m*(c*f-l*h),t[1]=-(o*(h*v-f*_)-d*(i*v-r*_)+m*(i*f-r*h)),t[2]=o*(c*v-l*_)-s*(i*v-r*_)+m*(i*l-r*c),t[3]=-(o*(c*f-l*h)-s*(i*f-r*h)+d*(i*l-r*c)),t[4]=-(a*(h*v-f*_)-u*(c*v-l*_)+p*(c*f-l*h)),t[5]=n*(h*v-f*_)-u*(i*v-r*_)+p*(i*f-r*h),t[6]=-(n*(c*v-l*_)-a*(i*v-r*_)+p*(i*l-r*c)),t[7]=n*(c*f-l*h)-a*(i*f-r*h)+u*(i*l-r*c),t[8]=a*(d*v-f*m)-u*(s*v-l*m)+p*(s*f-l*d),t[9]=-(n*(d*v-f*m)-u*(o*v-r*m)+p*(o*f-r*d)),t[10]=n*(s*v-l*m)-a*(o*v-r*m)+p*(o*l-r*s),t[11]=-(n*(s*f-l*d)-a*(o*f-r*d)+u*(o*l-r*s)),t[12]=-(a*(d*_-h*m)-u*(s*_-c*m)+p*(s*h-c*d)),t[13]=n*(d*_-h*m)-u*(o*_-i*m)+p*(o*h-i*d),t[14]=-(n*(s*_-c*m)-a*(o*_-i*m)+p*(o*c-i*s)),t[15]=n*(s*h-c*d)-a*(o*h-i*d)+u*(o*c-i*s),t}function v(t){var e=t[0],n=t[1],o=t[2],i=t[3],r=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=t[9],d=t[10],h=t[11],f=t[12],p=t[13],m=t[14],_=t[15];return(e*a-n*r)*(d*_-h*m)-(e*s-o*r)*(u*_-h*p)+(e*c-i*r)*(u*m-d*p)+(n*s-o*a)*(l*_-h*f)-(n*c-i*a)*(l*m-d*f)+(o*c-i*s)*(l*p-u*f)}function g(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],m=e[12],_=e[13],v=e[14],g=e[15],b=n[0],y=n[1],x=n[2],w=n[3];return t[0]=b*o+y*s+x*d+w*m,t[1]=b*i+y*c+x*h+w*_,t[2]=b*r+y*l+x*f+w*v,t[3]=b*a+y*u+x*p+w*g,b=n[4],y=n[5],x=n[6],w=n[7],t[4]=b*o+y*s+x*d+w*m,t[5]=b*i+y*c+x*h+w*_,t[6]=b*r+y*l+x*f+w*v,t[7]=b*a+y*u+x*p+w*g,b=n[8],y=n[9],x=n[10],w=n[11],t[8]=b*o+y*s+x*d+w*m,t[9]=b*i+y*c+x*h+w*_,t[10]=b*r+y*l+x*f+w*v,t[11]=b*a+y*u+x*p+w*g,b=n[12],y=n[13],x=n[14],w=n[15],t[12]=b*o+y*s+x*d+w*m,t[13]=b*i+y*c+x*h+w*_,t[14]=b*r+y*l+x*f+w*v,t[15]=b*a+y*u+x*p+w*g,t}function b(t,e,n){var o,i,r,a,s,c,l,u,d,h,f,p,m=n[0],_=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*_+e[8]*v+e[12],t[13]=e[1]*m+e[5]*_+e[9]*v+e[13],t[14]=e[2]*m+e[6]*_+e[10]*v+e[14],t[15]=e[3]*m+e[7]*_+e[11]*v+e[15]):(o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=o,t[1]=i,t[2]=r,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=o*m+s*_+d*v+e[12],t[13]=i*m+c*_+h*v+e[13],t[14]=r*m+l*_+f*v+e[14],t[15]=a*m+u*_+p*v+e[15]),t}function y(t,e,n){var o=n[0],i=n[1],r=n[2];return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function x(t,e,n,o){var i,a,s,c,l,u,d,h,f,p,m,_,v,g,b,y,x,w,C,E,k,S,A,M,O=o[0],T=o[1],R=o[2],F=Math.hypot(O,T,R);return F<r?null:(O*=F=1/F,T*=F,R*=F,i=Math.sin(n),s=1-(a=Math.cos(n)),c=e[0],l=e[1],u=e[2],d=e[3],h=e[4],f=e[5],p=e[6],m=e[7],_=e[8],v=e[9],g=e[10],b=e[11],y=O*O*s+a,x=T*O*s+R*i,w=R*O*s-T*i,C=O*T*s-R*i,E=T*T*s+a,k=R*T*s+O*i,S=O*R*s+T*i,A=T*R*s-O*i,M=R*R*s+a,t[0]=c*y+h*x+_*w,t[1]=l*y+f*x+v*w,t[2]=u*y+p*x+g*w,t[3]=d*y+m*x+b*w,t[4]=c*C+h*E+_*k,t[5]=l*C+f*E+v*k,t[6]=u*C+p*E+g*k,t[7]=d*C+m*E+b*k,t[8]=c*S+h*A+_*M,t[9]=l*S+f*A+v*M,t[10]=u*S+p*A+g*M,t[11]=d*S+m*A+b*M,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function w(t,e,n){var o=Math.sin(n),i=Math.cos(n),r=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*i+l*o,t[5]=a*i+u*o,t[6]=s*i+d*o,t[7]=c*i+h*o,t[8]=l*i-r*o,t[9]=u*i-a*o,t[10]=d*i-s*o,t[11]=h*i-c*o,t}function C(t,e,n){var o=Math.sin(n),i=Math.cos(n),r=e[0],a=e[1],s=e[2],c=e[3],l=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i-l*o,t[1]=a*i-u*o,t[2]=s*i-d*o,t[3]=c*i-h*o,t[8]=r*o+l*i,t[9]=a*o+u*i,t[10]=s*o+d*i,t[11]=c*o+h*i,t}function E(t,e,n){var o=Math.sin(n),i=Math.cos(n),r=e[0],a=e[1],s=e[2],c=e[3],l=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i+l*o,t[1]=a*i+u*o,t[2]=s*i+d*o,t[3]=c*i+h*o,t[4]=l*i-r*o,t[5]=u*i-a*o,t[6]=d*i-s*o,t[7]=h*i-c*o,t}function k(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function S(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e,n){var o,i,a,s=n[0],c=n[1],l=n[2],u=Math.hypot(s,c,l);return u<r?null:(s*=u=1/u,c*=u,l*=u,o=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=s*s*a+i,t[1]=c*s*a+l*o,t[2]=l*s*a-c*o,t[3]=0,t[4]=s*c*a-l*o,t[5]=c*c*a+i,t[6]=l*c*a+s*o,t[7]=0,t[8]=s*l*a+c*o,t[9]=c*l*a-s*o,t[10]=l*l*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function M(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=o+o,c=i+i,l=r+r,u=o*s,d=o*c,h=o*l,f=i*c,p=i*l,m=r*l,_=a*s,v=a*c,g=a*l;return t[0]=1-(f+m),t[1]=d+g,t[2]=h-v,t[3]=0,t[4]=d-g,t[5]=1-(u+m),t[6]=p+_,t[7]=0,t[8]=h+v,t[9]=p-_,t[10]=1-(u+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function F(t,e){var n=new a(3),o=-e[0],i=-e[1],r=-e[2],s=e[3],c=e[4],l=e[5],u=e[6],d=e[7],h=o*o+i*i+r*r+s*s;return h>0?(n[0]=2*(c*s+d*o+l*r-u*i)/h,n[1]=2*(l*s+d*i+u*o-c*r)/h,n[2]=2*(u*s+d*r+c*i-l*o)/h):(n[0]=2*(c*s+d*o+l*r-u*i),n[1]=2*(l*s+d*i+u*o-c*r),n[2]=2*(u*s+d*r+c*i-l*o)),R(t,e,n),t}function P(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function L(t,e){var n=e[0],o=e[1],i=e[2],r=e[4],a=e[5],s=e[6],c=e[8],l=e[9],u=e[10];return t[0]=Math.hypot(n,o,i),t[1]=Math.hypot(r,a,s),t[2]=Math.hypot(c,l,u),t}function z(t,e){var n=new a(3);L(n,e);var o=1/n[0],i=1/n[1],r=1/n[2],s=e[0]*o,c=e[1]*i,l=e[2]*r,u=e[4]*o,d=e[5]*i,h=e[6]*r,f=e[8]*o,p=e[9]*i,m=e[10]*r,_=s+d+m,v=0;return _>0?(v=2*Math.sqrt(_+1),t[3]=.25*v,t[0]=(h-p)/v,t[1]=(f-l)/v,t[2]=(c-u)/v):s>d&&s>m?(v=2*Math.sqrt(1+s-d-m),t[3]=(h-p)/v,t[0]=.25*v,t[1]=(c+u)/v,t[2]=(f+l)/v):d>m?(v=2*Math.sqrt(1+d-s-m),t[3]=(f-l)/v,t[0]=(c+u)/v,t[1]=.25*v,t[2]=(h+p)/v):(v=2*Math.sqrt(1+m-s-d),t[3]=(c-u)/v,t[0]=(f+l)/v,t[1]=(h+p)/v,t[2]=.25*v),t}function N(t,e,n,o){var i=e[0],r=e[1],a=e[2],s=e[3],c=i+i,l=r+r,u=a+a,d=i*c,h=i*l,f=i*u,p=r*l,m=r*u,_=a*u,v=s*c,g=s*l,b=s*u,y=o[0],x=o[1],w=o[2];return t[0]=(1-(p+_))*y,t[1]=(h+b)*y,t[2]=(f-g)*y,t[3]=0,t[4]=(h-b)*x,t[5]=(1-(d+_))*x,t[6]=(m+v)*x,t[7]=0,t[8]=(f+g)*w,t[9]=(m-v)*w,t[10]=(1-(d+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function I(t,e,n,o,i){var r=e[0],a=e[1],s=e[2],c=e[3],l=r+r,u=a+a,d=s+s,h=r*l,f=r*u,p=r*d,m=a*u,_=a*d,v=s*d,g=c*l,b=c*u,y=c*d,x=o[0],w=o[1],C=o[2],E=i[0],k=i[1],S=i[2],A=(1-(m+v))*x,M=(f+y)*x,O=(p-b)*x,T=(f-y)*w,R=(1-(h+v))*w,F=(_+g)*w,P=(p+b)*C,L=(_-g)*C,z=(1-(h+m))*C;return t[0]=A,t[1]=M,t[2]=O,t[3]=0,t[4]=T,t[5]=R,t[6]=F,t[7]=0,t[8]=P,t[9]=L,t[10]=z,t[11]=0,t[12]=n[0]+E-(A*E+T*k+P*S),t[13]=n[1]+k-(M*E+R*k+L*S),t[14]=n[2]+S-(O*E+F*k+z*S),t[15]=1,t}function B(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=n+n,s=o+o,c=i+i,l=n*a,u=o*a,d=o*s,h=i*a,f=i*s,p=i*c,m=r*a,_=r*s,v=r*c;return t[0]=1-d-p,t[1]=u+v,t[2]=h-_,t[3]=0,t[4]=u-v,t[5]=1-l-p,t[6]=f+m,t[7]=0,t[8]=h+_,t[9]=f-m,t[10]=1-l-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,e,n,o,i,r,a){var s=1/(n-e),c=1/(i-o),l=1/(r-a);return t[0]=2*r*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*c,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+o)*c,t[10]=(a+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r*2*l,t[15]=0,t}function H(t,e,n,o,i){var r,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(r=1/(o-i),t[10]=(i+o)*r,t[14]=2*i*o*r):(t[10]=-1,t[14]=-2*o),t}function j(t,e,n,o){var i=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),c=2/(a+s),l=2/(i+r);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*c*.5,t[9]=(i-r)*l*.5,t[10]=o/(n-o),t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n/(n-o),t[15]=0,t}function V(t,e,n,o,i,r,a){var s=1/(e-n),c=1/(o-i),l=1/(r-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+o)*c,t[14]=(a+r)*l,t[15]=1,t}function U(t,e,n,o){var i,a,s,c,l,u,d,h,p,m,_=e[0],v=e[1],g=e[2],b=o[0],y=o[1],x=o[2],w=n[0],C=n[1],E=n[2];return Math.abs(_-w)<r&&Math.abs(v-C)<r&&Math.abs(g-E)<r?f(t):(d=_-w,h=v-C,p=g-E,i=y*(p*=m=1/Math.hypot(d,h,p))-x*(h*=m),a=x*(d*=m)-b*p,s=b*h-y*d,(m=Math.hypot(i,a,s))?(i*=m=1/m,a*=m,s*=m):(i=0,a=0,s=0),c=h*s-p*a,l=p*i-d*s,u=d*a-h*i,(m=Math.hypot(c,l,u))?(c*=m=1/m,l*=m,u*=m):(c=0,l=0,u=0),t[0]=i,t[1]=c,t[2]=d,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=s,t[9]=u,t[10]=p,t[11]=0,t[12]=-(i*_+a*v+s*g),t[13]=-(c*_+l*v+u*g),t[14]=-(d*_+h*v+p*g),t[15]=1,t)}function q(t,e,n,o){var i=e[0],r=e[1],a=e[2],s=o[0],c=o[1],l=o[2],u=i-n[0],d=r-n[1],h=a-n[2],f=u*u+d*d+h*h;f>0&&(u*=f=1/Math.sqrt(f),d*=f,h*=f);var p=c*h-l*d,m=l*u-s*h,_=s*d-c*u;return(f=p*p+m*m+_*_)>0&&(p*=f=1/Math.sqrt(f),m*=f,_*=f),t[0]=p,t[1]=m,t[2]=_,t[3]=0,t[4]=d*_-h*m,t[5]=h*p-u*_,t[6]=u*m-d*p,t[7]=0,t[8]=u,t[9]=d,t[10]=h,t[11]=0,t[12]=i,t[13]=r,t[14]=a,t[15]=1,t}function G(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function X(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function W(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Y(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function K(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Q(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t[4]=e[4]+n[4]*o,t[5]=e[5]+n[5]*o,t[6]=e[6]+n[6]*o,t[7]=e[7]+n[7]*o,t[8]=e[8]+n[8]*o,t[9]=e[9]+n[9]*o,t[10]=e[10]+n[10]*o,t[11]=e[11]+n[11]*o,t[12]=e[12]+n[12]*o,t[13]=e[13]+n[13]*o,t[14]=e[14]+n[14]*o,t[15]=e[15]+n[15]*o,t}function J(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Z(t,e){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],_=t[13],v=t[14],g=t[15],b=e[0],y=e[1],x=e[2],w=e[3],C=e[4],E=e[5],k=e[6],S=e[7],A=e[8],M=e[9],O=e[10],T=e[11],R=e[12],F=e[13],P=e[14],L=e[15];return Math.abs(n-b)<=r*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-y)<=r*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(i-x)<=r*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=r*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-C)<=r*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(c-E)<=r*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-k)<=r*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(u-S)<=r*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(d-A)<=r*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-M)<=r*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(f-O)<=r*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(p-T)<=r*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(m-R)<=r*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(_-F)<=r*Math.max(1,Math.abs(_),Math.abs(F))&&Math.abs(v-P)<=r*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(g-L)<=r*Math.max(1,Math.abs(g),Math.abs(L))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var $=g,tt=Y;function et(){var t=new a(3);return a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function nt(t){var e=new a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ot(t){var e=t[0],n=t[1],o=t[2];return Math.hypot(e,n,o)}function it(t,e,n){var o=new a(3);return o[0]=t,o[1]=e,o[2]=n,o}function rt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function at(t,e,n,o){return t[0]=e,t[1]=n,t[2]=o,t}function st(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ct(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function lt(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function ut(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function dt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ht(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ft(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function pt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function mt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function _t(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function vt(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t}function gt(t,e){var n=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,o,i)}function bt(t,e){var n=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2];return n*n+o*o+i*i}function yt(t){var e=t[0],n=t[1],o=t[2];return e*e+n*n+o*o}function xt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function wt(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Ct(t,e){var n=e[0],o=e[1],i=e[2],r=n*n+o*o+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Et(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function kt(t,e,n){var o=e[0],i=e[1],r=e[2],a=n[0],s=n[1],c=n[2];return t[0]=i*c-r*s,t[1]=r*a-o*c,t[2]=o*s-i*a,t}function St(t,e,n,o){var i=e[0],r=e[1],a=e[2];return t[0]=i+o*(n[0]-i),t[1]=r+o*(n[1]-r),t[2]=a+o*(n[2]-a),t}function At(t,e,n,o,i,r){var a=r*r,s=a*(2*r-3)+1,c=a*(r-2)+r,l=a*(r-1),u=a*(3-2*r);return t[0]=e[0]*s+n[0]*c+o[0]*l+i[0]*u,t[1]=e[1]*s+n[1]*c+o[1]*l+i[1]*u,t[2]=e[2]*s+n[2]*c+o[2]*l+i[2]*u,t}function Mt(t,e,n,o,i,r){var a=1-r,s=a*a,c=r*r,l=s*a,u=3*r*s,d=3*c*a,h=c*r;return t[0]=e[0]*l+n[0]*u+o[0]*d+i[0]*h,t[1]=e[1]*l+n[1]*u+o[1]*d+i[1]*h,t[2]=e[2]*l+n[2]*u+o[2]*d+i[2]*h,t}function Ot(t,e){e=e||1;var n=2*s()*Math.PI,o=2*s()-1,i=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=o*e,t}function Tt(t,e,n){var o=e[0],i=e[1],r=e[2],a=n[3]*o+n[7]*i+n[11]*r+n[15];return a=a||1,t[0]=(n[0]*o+n[4]*i+n[8]*r+n[12])/a,t[1]=(n[1]*o+n[5]*i+n[9]*r+n[13])/a,t[2]=(n[2]*o+n[6]*i+n[10]*r+n[14])/a,t}function Rt(t,e,n){var o=e[0],i=e[1],r=e[2];return t[0]=o*n[0]+i*n[3]+r*n[6],t[1]=o*n[1]+i*n[4]+r*n[7],t[2]=o*n[2]+i*n[5]+r*n[8],t}function Ft(t,e,n){var o=n[0],i=n[1],r=n[2],a=n[3],s=e[0],c=e[1],l=e[2],u=i*l-r*c,d=r*s-o*l,h=o*c-i*s,f=i*h-r*d,p=r*u-o*h,m=o*d-i*u,_=2*a;return u*=_,d*=_,h*=_,f*=2,p*=2,m*=2,t[0]=s+u+f,t[1]=c+d+p,t[2]=l+h+m,t}function Pt(t,e,n,o){var i=[],r=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],r[0]=i[0],r[1]=i[1]*Math.cos(o)-i[2]*Math.sin(o),r[2]=i[1]*Math.sin(o)+i[2]*Math.cos(o),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t}function Lt(t,e,n,o){var i=[],r=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],r[0]=i[2]*Math.sin(o)+i[0]*Math.cos(o),r[1]=i[1],r[2]=i[2]*Math.cos(o)-i[0]*Math.sin(o),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t}function zt(t,e,n,o){var i=[],r=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],r[0]=i[0]*Math.cos(o)-i[1]*Math.sin(o),r[1]=i[0]*Math.sin(o)+i[1]*Math.cos(o),r[2]=i[2],t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t}function Nt(t,e){var n=t[0],o=t[1],i=t[2],r=e[0],a=e[1],s=e[2],c=Math.sqrt(n*n+o*o+i*i)*Math.sqrt(r*r+a*a+s*s),l=c&&Et(t,e)/c;return Math.acos(Math.min(Math.max(l,-1),1))}function It(t){return t[0]=0,t[1]=0,t[2]=0,t}function Bt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ht(t,e){var n=t[0],o=t[1],i=t[2],a=e[0],s=e[1],c=e[2];return Math.abs(n-a)<=r*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=r*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=r*Math.max(1,Math.abs(i),Math.abs(c))}var jt,Vt=ct,Ut=lt,qt=ut,Gt=gt,Xt=bt,Wt=ot,Yt=yt,Kt=(jt=et(),function(t,e,n,o,i,r){var a,s;for(e||(e=3),n||(n=0),s=o?Math.min(o*e+n,t.length):t.length,a=n;a<s;a+=e)jt[0]=t[a],jt[1]=t[a+1],jt[2]=t[a+2],i(jt,jt,r),t[a]=jt[0],t[a+1]=jt[1],t[a+2]=jt[2];return t});function Qt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jt(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function Zt(t,e,n){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,n);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=n}return n}var $t=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),te.set(this,{writable:!0,value:void 0}),ee.set(this,{writable:!0,value:void 0}),ne.set(this,{writable:!0,value:void 0}),oe.set(this,{writable:!0,value:void 0}),this.source=e,Zt(this,te,n)}var e,n,o;return e=t,(n=[{key:"program",get:function(){return Jt(this,ee)||Zt(this,ee,function(t,e,n){var o=t.createShader(t.VERTEX_SHADER);t.shaderSource(o,e);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,n);var r=t.createProgram();return t.attachShader(r,o),t.attachShader(r,i),t.compileShader(o),t.compileShader(i),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(console.error("Link failed: "+t.getProgramInfoLog(r)),console.error("vs info-log: "+t.getShaderInfoLog(o)),console.error("fs info-log: "+t.getShaderInfoLog(i)),null)}(Jt(this,te),"#version 300 es\n    // an attribute is an input (in) to a vertex shader.\n    // It will receive data from a buffer\n    in vec4 a_position;\n    out vec4 v_position;\n\n    // all shaders have a main function\n    void main() {\n\n      // gl_Position is a special variable a vertex shader\n      // is responsible for setting\n      gl_Position = a_position;\n      v_position = a_position;\n    }\n  ",this.source)),Jt(this,ee)}},{key:"vao",get:function(){return Jt(this,ne)||Zt(this,ne,function(t,e){var n=t.createVertexArray();t.bindVertexArray(n);var o=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0),n}(Jt(this,te),Jt(this,te).getAttribLocation(this.program,"a_position"))),Jt(this,ne)}},{key:"uniforms",get:function(){return Jt(this,oe)||Zt(this,oe,{resolution:Jt(this,te).getUniformLocation(this.program,"iResolution"),rot:Jt(this,te).getUniformLocation(this.program,"rot"),time:Jt(this,te).getUniformLocation(this.program,"iTime")}),Jt(this,oe)}}])&&Qt(e.prototype,n),o&&Qt(e,o),t}(),te=new WeakMap,ee=new WeakMap,ne=new WeakMap,oe=new WeakMap;function ie(t){var e=t.getContext("webgl2");if(null!==e){return{render:function(t,n,r,a){e.viewport(0,0,e.canvas.width,e.canvas.height),e.useProgram(a.program),e.bindVertexArray(a.vao),e.uniform2f(a.uniforms.resolution,e.canvas.width,e.canvas.height);var s=o.create();o.fromXRotation(s,n.x+n.xSpeed*t),o.rotateY(s,s,n.y+n.ySpeed*t),o.rotateZ(s,s,n.z+n.zSpeed*t),o.translate(s,s,i.fromValues(r.x,r.y,r.z)),e.uniformMatrix4fv(a.uniforms.rot,!1,s),e.uniform1f(a.uniforms.time,t),e.drawArrays(e.TRIANGLES,0,6)},newShader:function(t){return new $t(t,e)}}}alert("Unable to initialize WebGL. Your browser or machine may not support it.")}},function(t,e,n){"use strict";e.a='#version 300 es\nprecision highp float;\n\n// Constants\nconst float EPS = 2.0e-3;\nconst float MIN_STEP_D = 1.0e-2;\nconst vec3 AMB = vec3(0.5, 0.5, 0.5);\n\nconst float ETA = 1.5;\nconst float PI = 3.14159265;\n\n// reflection types\nconst int NONREFLECT = 1;\nconst int MIRRORREFLECT = 2;\nconst int GLASSREFLECT = 3;\n\nconst vec4 GLASSCOLOR = vec4(1.0, 0.5, 0.1, 1.0);\nconst vec4 MIRRORCOLOR = vec4(1.0, 0.3, 0.3, 1.0);\n\nconst vec3 MOD3 = vec3(.1031, .11369, .13787);\nconst float NOISE_PROPORTION = 0.85;\nconst float NOISE_FREQUENCY = 25.0;\nconst float NOISE_GRADIENT_MAGNITUDE = (1. * NOISE_FREQUENCY * 1.32);\n\n// Uniforms\nuniform vec2 iResolution;\nuniform mat4 rot;\nuniform float iTime;\n\n// Input and Output\nin vec4 v_position;\nout vec4 outColor;\n\n// Structs\nstruct Ray {\n  vec3 origin;\n  vec3 direction;\n};\n\nstruct Material {\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float shininess;\n  int reflectType;\n};\n\nstruct Light {\n  vec3 pos;\n  vec3 color;\n  float intensity;\n  float attenuate;\n};\n\n// Represents an intersection in the scene after marching\nstruct Hit {\n  float dist;    // distance to nearest object\n  vec3 p;        // point of intersection in world coords\n  Material mat;  // Material of nearest object\n};\n\nvec3 hash3(vec3 p3) {\n\tp3 = fract(p3 * MOD3);\n  p3 += dot(p3, p3.yxz + 19.19);\n  return -1. + 2. * fract(vec3((p3.x + p3.y) * p3.z, (p3.x+p3.z) * p3.y, (p3.y+p3.z) * p3.x));\n}\n\nfloat perlin_noise(vec3 p) {\n  vec3 pi = floor(p);\n  vec3 pf = p - pi;  \n  vec3 w = pf * pf * (3. - 2. * pf);\n    \n  return \tmix(\n    \t      mix(\n              mix(\n                dot(pf - vec3(0, 0, 0), hash3(pi + vec3(0, 0, 0))), \n                dot(pf - vec3(1, 0, 0), hash3(pi + vec3(1, 0, 0))),\n                w.x),\n              mix(\n                dot(pf - vec3(0, 0, 1), hash3(pi + vec3(0, 0, 1))), \n                dot(pf - vec3(1, 0, 1), hash3(pi + vec3(1, 0, 1))),\n                w.x),\n    \t      w.z),\n            mix(\n              mix(\n                dot(pf - vec3(0, 1, 0), hash3(pi + vec3(0, 1, 0))), \n                dot(pf - vec3(1, 1, 0), hash3(pi + vec3(1, 1, 0))),\n                w.x),\n              mix(\n                dot(pf - vec3(0, 1, 1), hash3(pi + vec3(0, 1, 1))), \n                dot(pf - vec3(1, 1, 1), hash3(pi + vec3(1, 1, 1))),\n                w.x),\n     \t      w.z),\n\t        w.y);\n}\n\n// Primitives\n// All primitives take the point as the first argument, followed by other\n// parameters of the shape. They are all centered at the origin.\n\n// r is the radius of the sphere\nfloat sdSphere(vec3 p, float r) {\n  return length(p)-r;\n}\n\nfloat sdNoisySphere(vec3 p, float r, float noiseProp) {\n  float prop = 1. - noiseProp;\n  float noise = perlin_noise(p * NOISE_FREQUENCY) / NOISE_GRADIENT_MAGNITUDE;\n\treturn mix(sdSphere(p, r), noise, prop);\n}\n\n// b is the corner of the box in the positive quadrant\nfloat sdBox(vec3 p, vec3 b) {\n  vec3 q = abs(p) - b;\n  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);\n}\n\n// r determine rounded-ness\nfloat sdRoundBox(vec3 p, vec3 b, float r) {\n  vec3 q = abs(p) - b;\n  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0) - r;\n}\n\n// h is the height of the cylinder and r is the radius\nfloat sdCappedCylinder(vec3 p, float h, float r) {\n  vec2 d = abs(vec2(length(p.xz),p.y)) - vec2(r,h);\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0));\n}\n\nfloat sdRoundedCylinder(vec3 p, float ra, float rb, float h) {\n  vec2 d = vec2( length(p.xz)-2.0*ra+rb, abs(p.y) - h );\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0)) - rb;\n}\n\n// n is the normal to the plane, with the w coordinate the distance from the\n// origin\nfloat sdPlane(vec3 p, vec4 n) {\n  return dot(p, n.xyz) + n.w;\n}\n\nfloat sdTorus(vec3 p, vec2 t) {\n  vec2 q = vec2(length(p.xz) - t.x, p.y);\n  return length(q) - t.y;\n}\n\nvec4 opElongate(vec3 p, vec3 h) {\n  vec3 q = abs(p)-h;\n  return vec4(max(q,0.0), min(max(q.x,max(q.y,q.z)), 0.0)); \n}\n\nfloat sdElongatedTorus(vec3 p, vec3 h, vec2 t) {\n  vec4 w = opElongate(p, h);\n  return w.w + sdTorus(w.xyz, t);\n}\n\nfloat sdLink(vec3 p, float le, float r1, float r2) {\n  vec3 q = vec3( p.x, max(abs(p.y) - le,0.0), p.z );\n  return length(vec2(length(q.xy) - r1, q.z)) - r2;\n}\n\nfloat sdEllipsoid(vec3 p, vec3 r) {\n  float k0 = length(p / r);\n  float k1 = length(p / (r*r));\n  return k0 * (k0 - 1.0) / k1;\n}\n\nfloat sdCone(in vec3 p, in vec2 c, in float h) {\n  float q = length(p.xz);\n  float d1 = -p.y-h;\n  float d2 = max( dot(vec2(q,p.y),c), p.y);\n  return length(max(vec2(d1,d2),0.0)) + min(max(d1,d2), 0.);\n}\n\nfloat sdPyramid(vec3 p, float h) {\n  float m2 = h*h + 0.25;\n    \n  p.xz = abs(p.xz);\n  p.xz = (p.z>p.x) ? p.zx : p.xz;\n  p.xz -= 0.5;\n\n  vec3 q = vec3( p.z, h*p.y - 0.5*p.x, h*p.x + 0.5*p.y);\n   \n  float s = max(-q.x,0.0);\n  float t = clamp( (q.y-0.5*p.z)/(m2+0.25), 0.0, 1.0 );\n  float a = m2*(q.x+s)*(q.x+s) + q.y*q.y;\n  float b = m2*(q.x+0.5*t)*(q.x+0.5*t) + (q.y-m2*t)*(q.y-m2*t);   \n  float d2 = min(q.y,-q.x*m2-q.y*0.5) > 0.0 ? 0.0 : min(a,b);\n\n  return sqrt( (d2+q.z*q.z)/m2 ) * sign(max(q.z,-p.y));\n}\n\n// Operations\n// The operations act on the domain, and so have the inverse effect on the\n// image. That\'s why opTx subtracts instead of adding. In addition, that means\n// you have to apply them in the opposite order, so opTx(rotate(p)) would\n// translate and then rotate.\n\n// Translate by d\nvec3 opTx(vec3 p, vec3 d) {\n  return p-d;\n}\n\nvec3 opScale(vec3 p, float s) {\n  return p / s;\n}\n\nfloat opSmoothU(float d1, float d2, float k) {\n  float h = clamp( 0.5 + 0.5*(d2-d1)/k, 0.0, 1.0 );\n  return mix( d2, d1, h ) - k*h*(1.0-h);\n}\n\nfloat opSmoothSub(float d1, float d2, float k) {\n  float h = clamp( 0.5 - 0.5*(d2+d1)/k, 0.0, 1.0 );\n  return mix( d2, -d1, h ) + k*h*(1.0-h);\n}\n\nfloat opSmoothIntersect(float d1, float d2, float k) {\n  float h = max(k-abs(d1-d2),0.0);\n  return max(d1, d2) + h*h*0.25/k;\n  /* float h = clamp( 0.5 - 0.5*(d2-d1)/k, 0.0, 1.0 );\n  return mix( d2, d1, h ) + k*h*(1.0-h); */\n}\n\nvec3 opInf(vec3 p, vec3 c) {\n  return mod(p+0.5*c,c)-0.5*c;\n}\n\nvec3 opFiniteRep(vec3 p, vec3 c, vec3 l) {\n  return p-c*clamp(round(p/c),-l,l);\n}\n\n\n// Rotate around a coordinate axis (i.e. in a plane perpendicular to that\n// axis) by angle <a>.\n// Read like this: R(p.xz, a) rotates "x towards z".\n// This is fast if <a> is a compile-time constant and slower (but still\n// practical) if not.\nvoid opRot(inout vec2 p, float a) {\n  p = cos(a)*p + sin(a)*vec2(p.y, -p.x);\n}\n\nvec3 opRotX(vec3 p, float a) {\n  opRot(p.yz, a);\n  return p;\n}\n\nvec3 opRotY(vec3 p, float a) {\n  opRot(p.xz, a);\n  return p;\n}\n\nvec3 opRotZ(vec3 p, float a) {\n  opRot(p.xy, a);\n  return p;\n}\n\nvec3 opBend(in vec3 p, float k) {\n  float c = cos(k*p.y);\n  float s = sin(k*p.y);\n  mat2  m = mat2(c,-s,s,c);\n  return vec3(m*p.xy,p.z);\n}\n\nvec3 opTwist(in vec3 p, float k) {\n  float c = cos(k*p.y);\n  float s = sin(k*p.y);\n  mat2  m = mat2(c,-s,s,c);\n  return vec3(m*p.xz,p.y);\n}\n\nfloat opNoise(vec3 p, float v, float noiseProp) {\n  float prop = 1. - noiseProp;\n  float noise = perlin_noise(p * NOISE_FREQUENCY) / NOISE_GRADIENT_MAGNITUDE;\n  return mix(v, noise, prop);\n}\n\nfloat opOnion(float d, float h) {\n    return abs(d)-h;\n}\n\n// produces n-1 steps of a staircase:\nfloat opUnionStairs(float a, float b, float r, float n) {\n\tfloat s = r/n;\n\tfloat u = b-r;\n\treturn min(min(a,b), 0.5 * (u + a + abs ((mod (u - a + s, 2. * s)) - s)));\n}\n\n// We can just call Union since stairs are symmetric.\nfloat opIntersectionStairs(float a, float b, float r, float n) {\n\treturn -opUnionStairs(-a, -b, r, n);\n}\n\nfloat opDifferenceStairs(float a, float b, float r, float n) {\n\treturn -opUnionStairs(-a, b, r, n);\n}\n\nvec3 opModPolar(inout vec3 p, float repetitions) {\n  float z = p.z;\n\tfloat angle = 2.*PI/repetitions;\n\tfloat a = atan(p.y, p.x) + angle/2.;\n\tfloat r = length(p);\n\tfloat c = floor(a/angle);\n\ta = mod(a,angle) - angle/2.;\n\tp = vec3(cos(a), sin(a), z)*r;\n\t// For an odd number of repetitions, fix cell index of the cell in -x direction\n\t// (cell index would be e.g. -5 and 5 in the two halves of the cell):\n\t// if (abs(c) >= (repetitions/2.)) c = abs(c);\n\t// return c;\n  return p;\n}\n'},function(t,e,n){"use strict";e.a="// Calculate a fresnel term for reflections\nfloat calcFresnelTerm(in Ray ray, in vec3 n, in float power) {\n  float fresnel = min(1., dot(ray.direction, n) + 1.0);\n  fresnel = pow(fresnel, power);\n  return fresnel;\n}\n\nvec3 calcNormal(vec3 p) {\n  const vec2 eps = vec2(0.001, 0.0);\n\n  Material mat;\n\n  vec3 n = vec3(\n      sdf(p + eps.xyy, mat) - sdf(p - eps.xyy, mat),\n      sdf(p + eps.yxy, mat) - sdf(p - eps.yxy, mat),\n      sdf(p + eps.yyx, mat) - sdf(p - eps.yyx, mat));\n\n  return normalize(n);\n}\n\nHit march(Ray r) {\n  Material mat;\n  vec3 p = r.origin;\n  vec3 dir = r.direction;\n  float dist;\n  float dist_mrch = 0.;\n\n  for (int i = 0; i < MAX_STEPS; i++) {\n    dist = sdf(p, mat);\n    dist_mrch += dist;\n    if (dist < EPS) {\n      if (mat.reflectType == MIRRORREFLECT) {\n        vec3 norm = calcNormal(p);\n        dir = reflect(dir, norm);\n        p += norm * EPS * 2.0;\n      } else if (mat.reflectType == GLASSREFLECT) {\n        // For refraction, we first calculate a new direction as we enter the\n        // object\n        vec3 norm = calcNormal(p);\n        dir = refract(dir, norm, 1./ETA);  // Hard coded eta right now\n        p -= norm * 2.0 * EPS;  // Make sure we're in the object\n\n        // Now, march until we exit the inside of this object\n        // NOTE: I think this has a slight bug. Need to be checking\n        for (; i < MAX_STEPS; i++) {\n          dist = sdf(p, mat);\n          if (dist > EPS) break;\n          p -= dir * min(dist, -MIN_STEP_D);\n        }\n        // Refract again\n        norm = calcNormal(p);\n        dir = refract(dir, -norm, ETA);\n      } else break;\n    }\n    if (dist_mrch > MAX_MARCH_DISTANCE) break;\n    p += dir * max(dist, MIN_STEP_D);\n  }\n\n  return Hit(dist, p, mat);\n}\n\nvec3 phongContrib(Hit h, vec3 eye, Light l, vec3 N) {\n  vec3 L = normalize(l.pos - h.p);\n  vec3 V = normalize(eye - h.p);\n  vec3 R = normalize(-reflect(L, N));\n\n  vec3 diffuse = max(0.0, dot(L, N)) * h.mat.diffuse * l.color;\n  vec3 specular = pow(max(0.0, dot(R, V)), h.mat.shininess) * h.mat.specular * l.color;\n\n  return diffuse + specular;\n}\n\nfloat shadow(Light l, vec3 p, float w) {\n  // At most, need to step all the way to the light\n  float maxt = length(l.pos - p);\n  // Direction towards point\n  vec3 dir = normalize(l.pos - p);\n  // Ratio for soft shadows\n  float ratio = 1.0;\n  // March ray towards light\n  float t = EPS;\n  // Dummy material for sdf\n  Material mat;\n  // Previous step's data\n  // float prev_d = EPS;\n  // float prev_t = EPS;\n  for (int i = 0; i < MAX_STEPS; i++) {\n    float dist = sdf(p + dir*t, mat);\n    // Calculate the closest distance\n    // float lent = d*d/(2.0*prev_d);\n    // float dist = sqrt(d*d - lent*lent);\n    ratio = min(ratio, dist/(log(t * w + 1.0)));\n    if (ratio < 0.0 || t >= maxt) break;\n    // prev_d = d;\n    // prev_t = t;\n    t += dist;\n  }\n  ratio = max(ratio, -1.0);\n  return smoothstep(0.0,1.0,ratio);\n}\n\n// Calculate a color for a particular eye, hitting at a point in the scene\nvec3 calcColor(Hit hit, vec3 eye) {\n  vec3 color = AMB * hit.mat.ambient;\n  vec3 norm = calcNormal(hit.p);\n  for (int i = 0; i < N_LIGHTS; i++) {\n    Light l = lights[i];\n    float ratio = shadow(l, hit.p + norm*0.01, 0.1);\n    color += phongContrib(hit, eye, l, norm) * ratio;\n  }\n  return color;\n}\n\nvoid main() {\n  // Initialize\n  init();\n\n  // Convert to [-1, 1] screen coordinates\n  float cameraFOV = 0.5;\n  vec3 direction = vec3(v_position.x * cameraFOV * iResolution.x/iResolution.y,\n      v_position.y * cameraFOV, 1.0);\n\n  // Apply rotations/translations to our origin and direction vectors. Note how\n  // we DO NOT translate the direction by setting the w to 0.0\n  vec3 eye = vec3(rot * vec4(0.0, 0.0, -25.0, 1.0));\n  vec3 dir = normalize(vec3(rot * vec4(direction, 0.0)));\n  Ray ray = Ray(eye, dir);\n\n  // Find intersection\n  Hit hit = march(ray);\n\n  // Didn't hit anything\n  if (hit.dist > MAX_DISTANCE) {\n    outColor = BACKGROUND_COLOR;\n    return;\n  }\n\n  // Calculate color and apply gamma correction\n  outColor = vec4(pow(calcColor(hit, eye), vec3(1.0/2.2)), 1);\n}\n"},function(t,e,n){"use strict";function o(t,e){var n=t.__state.conversionName.toString(),o=Math.round(t.r),i=Math.round(t.g),r=Math.round(t.b),a=t.a,s=Math.round(t.h),c=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var u=t.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===n?"rgb("+o+","+i+","+r+")":"CSS_RGBA"===n?"rgba("+o+","+i+","+r+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+i+","+r+"]":"RGBA_ARRAY"===n?"["+o+","+i+","+r+","+a+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+c+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+c+",v:"+l+",a:"+a+"}":"unknown format"}var i=Array.prototype.forEach,r=Array.prototype.slice,a={BREAK:{},extend:function(t){return this.each(r.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(r.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(i&&t.forEach&&t.forEach===i)t.forEach(e,n);else if(t.length===t.length+0){var o,r=void 0;for(r=0,o=t.length;r<o;r++)if(r in t&&e.call(n,t[r],r)===this.BREAK)return}else for(var a in t)if(e.call(n,t[a],a)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var o=void 0;return function(){var i=this,r=arguments;function a(){o=null,n||t.apply(i,r)}var s=n||!o;clearTimeout(o),o=setTimeout(a,e),s&&t.apply(i,r)}},toArray:function(t){return t.toArray?t.toArray():r.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},s=[{litmus:a.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:o},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:o},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:o},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:o}}},{litmus:a.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:a.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:a.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(a.isNumber(t.r)&&a.isNumber(t.g)&&a.isNumber(t.b)&&a.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(a.isNumber(t.r)&&a.isNumber(t.g)&&a.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(a.isNumber(t.h)&&a.isNumber(t.s)&&a.isNumber(t.v)&&a.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(a.isNumber(t.h)&&a.isNumber(t.s)&&a.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],c=void 0,l=void 0,u=function(){l=!1;var t=arguments.length>1?a.toArray(arguments):arguments[0];return a.each(s,(function(e){if(e.litmus(t))return a.each(e.conversions,(function(e,n){if(c=e.read(t),!1===l&&!1!==c)return l=c,c.conversionName=n,c.conversion=e,a.BREAK})),a.BREAK})),l},d=void 0,h={hsv_to_rgb:function(t,e,n){var o=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),r=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),c=[[n,s,r],[a,n,r],[r,n,s],[r,a,n],[s,r,n],[n,r,a]][o];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(t,e,n){var o=Math.min(t,e,n),i=Math.max(t,e,n),r=i-o,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=t===i?(e-n)/r:e===i?2+(n-t)/r:4+(t-e)/r,(a/=6)<0&&(a+=1),{h:360*a,s:r/i,v:i/255})},rgb_to_hex:function(t,e,n){var o=this.hex_with_component(0,2,t);return o=this.hex_with_component(o,1,e),o=this.hex_with_component(o,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(d=8*e)|t&~(255<<d)}},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0},v=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},g=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},b=function(){function t(){if(p(this,t),this.__state=u.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return m(t,[{key:"toString",value:function(){return o(this)}},{key:"toHexString",value:function(){return o(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function y(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||b.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(b.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function x(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||b.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(b.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}b.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=h.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");a.extend(t.__state,h.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},b.recalculateHSV=function(t){var e=h.rgb_to_hsv(t.r,t.g,t.b);a.extend(t.__state,{s:e.s,v:e.v}),a.isNaN(e.h)?a.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},b.COMPONENTS=["r","g","b","h","s","v","hex","a"],y(b.prototype,"r",2),y(b.prototype,"g",1),y(b.prototype,"b",0),x(b.prototype,"h"),x(b.prototype,"s"),x(b.prototype,"v"),Object.defineProperty(b.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(b.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=h.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var w=function(){function t(e,n){p(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return m(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),C={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){a.each(t,(function(t){C[t]=e}))}));var E=/(\d+(\.\d+)?)px/;function k(t){if("0"===t||a.isUndefined(t))return 0;var e=t.match(E);return a.isNull(e)?0:parseFloat(e[1])}var S={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var o=n,i=e;a.isUndefined(i)&&(i=!0),a.isUndefined(o)&&(o=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),o&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,o){var i=n||{},r=C[e];if(!r)throw new Error("Event type "+e+" not supported.");var s=document.createEvent(r);switch(r){case"MouseEvents":var c=i.x||i.clientX||0,l=i.y||i.clientY||0;s.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,c,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=s.initKeyboardEvent||s.initKeyEvent;a.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(e,i.bubbles||!1,i.cancelable||!0)}a.defaults(s,o),t.dispatchEvent(s)},bind:function(t,e,n,o){var i=o||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),S},unbind:function(t,e,n,o){var i=o||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),S},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return S},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),o=n.indexOf(e);-1!==o&&(n.splice(o,1),t.className=n.join(" "))}else t.className=void 0;return S},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return k(e["border-left-width"])+k(e["border-right-width"])+k(e["padding-left"])+k(e["padding-right"])+k(e.width)},getHeight:function(t){var e=getComputedStyle(t);return k(e["border-top-width"])+k(e["border-bottom-width"])+k(e["padding-top"])+k(e["padding-bottom"])+k(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},A=function(t){function e(t,n){p(this,e);var o=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),S.bind(o.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return v(e,t),m(e,[{key:"setValue",value:function(t){var n=_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(w),M=function(t){function e(t,n,o){p(this,e);var i=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=o,s=i;if(i.__select=document.createElement("select"),a.isArray(r)){var c={};a.each(r,(function(t){c[t]=t})),r=c}return a.each(r,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)})),i.updateDisplay(),S.bind(i.__select,"change",(function(){var t=this.options[this.selectedIndex].value;s.setValue(t)})),i.domElement.appendChild(i.__select),i}return v(e,t),m(e,[{key:"setValue",value:function(t){var n=_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return S.isActive(this.__select)?this:(this.__select.value=this.getValue(),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(w),O=function(t){function e(t,n){p(this,e);var o=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=o;function r(){i.setValue(i.__input.value)}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),S.bind(o.__input,"keyup",r),S.bind(o.__input,"change",r),S.bind(o.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),S.bind(o.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return v(e,t),m(e,[{key:"updateDisplay",value:function(){return S.isActive(this.__input)||(this.__input.value=this.getValue()),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(w);function T(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var R=function(t){function e(t,n,o){p(this,e);var i=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=o||{};return i.__min=r.min,i.__max=r.max,i.__step=r.step,a.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=T(i.__impliedStep),i}return v(e,t),m(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=T(t),this}}]),e}(w);var F=function(t){function e(t,n,o){p(this,e);var i=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o));i.__truncationSuspended=!1;var r=i,s=void 0;function c(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}function l(t){var e=s-t.clientY;r.setValue(r.getValue()+e*r.__impliedStep),s=t.clientY}function u(){S.unbind(window,"mousemove",l),S.unbind(window,"mouseup",u),c()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),S.bind(i.__input,"change",(function(){var t=parseFloat(r.__input.value);a.isNaN(t)||r.setValue(t)})),S.bind(i.__input,"blur",(function(){c()})),S.bind(i.__input,"mousedown",(function(t){S.bind(window,"mousemove",l),S.bind(window,"mouseup",u),s=t.clientY})),S.bind(i.__input,"keydown",(function(t){13===t.keyCode&&(r.__truncationSuspended=!0,this.blur(),r.__truncationSuspended=!1,c())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return v(e,t),m(e,[{key:"updateDisplay",value:function(){var t,n,o;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,o=Math.pow(10,n),Math.round(t*o)/o),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(R);function P(t,e,n,o,i){return o+(t-e)/(n-e)*(i-o)}var L=function(t){function e(t,n,o,i,r){p(this,e);var a=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:o,max:i,step:r})),s=a;function c(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(P(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function l(){S.unbind(window,"mousemove",c),S.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function u(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(P(e,n.left,n.right,s.__min,s.__max))}function d(){S.unbind(window,"touchmove",u),S.unbind(window,"touchend",d),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),S.bind(a.__background,"mousedown",(function(t){document.activeElement.blur(),S.bind(window,"mousemove",c),S.bind(window,"mouseup",l),c(t)})),S.bind(a.__background,"touchstart",(function(t){if(1!==t.touches.length)return;S.bind(window,"touchmove",u),S.bind(window,"touchend",d),u(t)})),S.addClass(a.__background,"slider"),S.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return v(e,t),m(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(R),z=function(t){function e(t,n,o){p(this,e);var i=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===o?"Fire":o,S.bind(i.__button,"click",(function(t){return t.preventDefault(),r.fire(),!1})),S.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return v(e,t),m(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(w),N=function(t){function e(t,n){p(this,e);var o=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));o.__color=new b(o.getValue()),o.__temp=new b(0);var i=o;o.domElement=document.createElement("div"),S.makeSelectable(o.domElement,!1),o.__selector=document.createElement("div"),o.__selector.className="selector",o.__saturation_field=document.createElement("div"),o.__saturation_field.className="saturation-field",o.__field_knob=document.createElement("div"),o.__field_knob.className="field-knob",o.__field_knob_border="2px solid ",o.__hue_knob=document.createElement("div"),o.__hue_knob.className="hue-knob",o.__hue_field=document.createElement("div"),o.__hue_field.className="hue-field",o.__input=document.createElement("input"),o.__input.type="text",o.__input_textShadow="0 1px 1px ",S.bind(o.__input,"keydown",(function(t){13===t.keyCode&&f.call(this)})),S.bind(o.__input,"blur",f),S.bind(o.__selector,"mousedown",(function(){S.addClass(this,"drag").bind(window,"mouseup",(function(){S.removeClass(i.__selector,"drag")}))})),S.bind(o.__selector,"touchstart",(function(){S.addClass(this,"drag").bind(window,"touchend",(function(){S.removeClass(i.__selector,"drag")}))}));var r,s=document.createElement("div");function c(t){_(t),S.bind(window,"mousemove",_),S.bind(window,"touchmove",_),S.bind(window,"mouseup",d),S.bind(window,"touchend",d)}function l(t){v(t),S.bind(window,"mousemove",v),S.bind(window,"touchmove",v),S.bind(window,"mouseup",h),S.bind(window,"touchend",h)}function d(){S.unbind(window,"mousemove",_),S.unbind(window,"touchmove",_),S.unbind(window,"mouseup",d),S.unbind(window,"touchend",d),m()}function h(){S.unbind(window,"mousemove",v),S.unbind(window,"touchmove",v),S.unbind(window,"mouseup",h),S.unbind(window,"touchend",h),m()}function f(){var t=u(this.value);!1!==t?(i.__color.__state=t,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function m(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function _(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,o=n.clientX,r=n.clientY,a=(o-e.left)/(e.right-e.left),s=1-(r-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function v(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return a.extend(o.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),a.extend(o.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:o.__field_knob_border+(o.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),a.extend(o.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),a.extend(o.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),a.extend(s.style,{width:"100%",height:"100%",background:"none"}),B(s,"top","rgba(0,0,0,0)","#000"),a.extend(o.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(r=o.__hue_field).style.background="",r.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",r.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.extend(o.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:o.__input_textShadow+"rgba(0,0,0,0.7)"}),S.bind(o.__saturation_field,"mousedown",c),S.bind(o.__saturation_field,"touchstart",c),S.bind(o.__field_knob,"mousedown",c),S.bind(o.__field_knob,"touchstart",c),S.bind(o.__hue_field,"mousedown",l),S.bind(o.__hue_field,"touchstart",l),o.__saturation_field.appendChild(s),o.__selector.appendChild(o.__field_knob),o.__selector.appendChild(o.__saturation_field),o.__selector.appendChild(o.__hue_field),o.__hue_field.appendChild(o.__hue_knob),o.domElement.appendChild(o.__input),o.domElement.appendChild(o.__selector),o.updateDisplay(),o}return v(e,t),m(e,[{key:"updateDisplay",value:function(){var t=u(this.getValue());if(!1!==t){var e=!1;a.each(b.COMPONENTS,(function(n){if(!a.isUndefined(t[n])&&!a.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&a.extend(this.__color.__state,t)}a.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;a.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,B(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),a.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),e}(w),I=["-moz-","-o-","-webkit-","-ms-",""];function B(t,e,n,o){t.style.background="",a.each(I,(function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+o+" 100%); "}))}var D=function(t,e){var n=e||document,o=document.createElement("style");o.type="text/css",o.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(o)}catch(t){}},H='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',j=function(t,e){var n=t[e];return a.isArray(arguments[2])||a.isObject(arguments[2])?new M(t,e,arguments[2]):a.isNumber(n)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?a.isNumber(arguments[4])?new L(t,e,arguments[2],arguments[3],arguments[4]):new L(t,e,arguments[2],arguments[3]):a.isNumber(arguments[4])?new F(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new F(t,e,{min:arguments[2],max:arguments[3]}):a.isString(n)?new O(t,e):a.isFunction(n)?new z(t,e,""):a.isBoolean(n)?new A(t,e):null};var V=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},U=function(){function t(){p(this,t),this.backgroundElement=document.createElement("div"),a.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),S.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),a.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;S.bind(this.backgroundElement,"click",(function(){e.hide()}))}return m(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),a.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",S.unbind(t.domElement,"webkitTransitionEnd",e),S.unbind(t.domElement,"transitionend",e),S.unbind(t.domElement,"oTransitionEnd",e)};S.bind(this.domElement,"webkitTransitionEnd",e),S.bind(this.domElement,"transitionend",e),S.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-S.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-S.getHeight(this.domElement)/2+"px"}}]),t}();D(function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var q=function(){try{return!!window.localStorage}catch(t){return!1}}(),G=void 0,X=!0,W=void 0,Y=!1,K=[],Q=function t(e){var n=this,o=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),S.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=a.defaults(o,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),o=a.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),a.isUndefined(o.load)?o.load={preset:"Default"}:o.preset&&(o.load.preset=o.preset),a.isUndefined(o.parent)&&o.hideable&&K.push(this),o.resizable=a.isUndefined(o.parent)&&o.resizable,o.autoPlace&&a.isUndefined(o.scrollable)&&(o.scrollable=!0);var i,r=q&&"true"===localStorage.getItem(nt(this,"isLocal")),s=void 0,c=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(t){n.parent?n.getRoot().preset=t:o.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return o.width},set:function(t){o.width=t,st(n,t)}},name:{get:function(){return o.name},set:function(t){o.name=t,c&&(c.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(e){o.closed=e,o.closed?S.addClass(n.__ul,t.CLASS_CLOSED):S.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return r},set:function(t){q&&(r=t,t?S.bind(window,"unload",s):S.unbind(window,"unload",s),localStorage.setItem(nt(n,"isLocal"),t))}}}),a.isUndefined(o.parent)){if(this.closed=o.closed||!1,S.addClass(this.domElement,t.CLASS_MAIN),S.makeSelectable(this.domElement,!1),q&&r){n.useLocalStorage=!0;var l=localStorage.getItem(nt(this,"gui"));l&&(o.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,S.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),o.closeOnTop?(S.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(S.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),S.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===o.closed&&(o.closed=!0);var u=document.createTextNode(o.name);S.addClass(u,"controller-name"),c=J(n,u);S.addClass(this.__ul,t.CLASS_CLOSED),S.addClass(c,"title"),S.bind(c,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),o.closed||(this.closed=!1)}o.autoPlace&&(a.isUndefined(o.parent)&&(X&&(W=document.createElement("div"),S.addClass(W,"dg"),S.addClass(W,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(W),X=!1),W.appendChild(this.domElement),S.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||st(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},S.bind(window,"resize",this.__resizeHandler),S.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),S.bind(this.__ul,"transitionend",this.__resizeHandler),S.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&at(this),s=function(){q&&"true"===localStorage.getItem(nt(n,"isLocal"))&&localStorage.setItem(nt(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,o.parent||((i=n.getRoot()).width+=1,a.defer((function(){i.width-=1})))};function J(t,e,n){var o=document.createElement("li");return e&&o.appendChild(e),n?t.__ul.insertBefore(o,n):t.__ul.appendChild(o),t.onResize(),o}function Z(t){S.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&S.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function $(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function tt(t,e){var n=t.getRoot(),o=n.__rememberedObjects.indexOf(e.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[e.property]=e,n.load&&n.load.remembered){var r=n.load.remembered,a=void 0;if(r[t.preset])a=r[t.preset];else{if(!r.Default)return;a=r.Default}if(a[o]&&void 0!==a[o][e.property]){var s=a[o][e.property];e.initialValue=s,e.setValue(s)}}}}function et(t,e,n,o){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(o.color)i=new N(e,n);else{var r=[e,n].concat(o.factoryArgs);i=j.apply(t,r)}o.before instanceof w&&(o.before=o.before.__li),tt(t,i),S.addClass(i.domElement,"c");var s=document.createElement("span");S.addClass(s,"property-name"),s.innerHTML=i.property;var c=document.createElement("div");c.appendChild(s),c.appendChild(i.domElement);var l=J(t,c,o.before);return S.addClass(l,Q.CLASS_CONTROLLER_ROW),i instanceof N?S.addClass(l,"color"):S.addClass(l,f(i.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,a.extend(n,{options:function(e){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:o,factoryArgs:[a.toArray(arguments)]})}if(a.isArray(e)||a.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof L){var o=new F(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});a.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],i=o[t];n[t]=o[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(o,t),e.apply(n,t)}})),S.addClass(e,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof F){var i=function(e){if(a.isNumber(n.__min)&&a.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var r=et(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return r.name(o),i&&r.listen(),r}return e};n.min=a.compose(i,n.min),n.max=a.compose(i,n.max)}else n instanceof A?(S.bind(e,"click",(function(){S.fakeEvent(n.__checkbox,"click")})),S.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof z?(S.bind(e,"click",(function(){S.fakeEvent(n.__button,"click")})),S.bind(e,"mouseover",(function(){S.addClass(n.__button,"hover")})),S.bind(e,"mouseout",(function(){S.removeClass(n.__button,"hover")}))):n instanceof N&&(S.addClass(e,"color"),n.updateDisplay=a.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=a.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&$(t.getRoot(),!0),e}),n.setValue)}(t,l,i),t.__controllers.push(i),i}function nt(t,e){return document.location.href+"."+e}function ot(t,e,n){var o=document.createElement("option");o.innerHTML=e,o.value=e,t.__preset_select.appendChild(o),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function it(t,e){e.style.display=t.useLocalStorage?"block":"none"}function rt(t){var e=t.__save_row=document.createElement("li");S.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),S.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",S.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",S.addClass(o,"button"),S.addClass(o,"save");var i=document.createElement("span");i.innerHTML="New",S.addClass(i,"button"),S.addClass(i,"save-as");var r=document.createElement("span");r.innerHTML="Revert",S.addClass(r,"button"),S.addClass(r,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?a.each(t.load.remembered,(function(e,n){ot(t,n,n===t.preset)})):ot(t,"Default",!1),S.bind(s,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(s),e.appendChild(n),e.appendChild(o),e.appendChild(i),e.appendChild(r),q){var c=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(nt(0,"isLocal"))&&l.setAttribute("checked","checked"),it(t,c),S.bind(l,"change",(function(){t.useLocalStorage=!t.useLocalStorage,it(t,c)}))}var u=document.getElementById("dg-new-constructor");S.bind(u,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||G.hide()})),S.bind(n,"click",(function(){u.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),G.show(),u.focus(),u.select()})),S.bind(o,"click",(function(){t.save()})),S.bind(i,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),S.bind(r,"click",(function(){t.revert()}))}function at(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function o(){S.removeClass(t.__closeButton,Q.CLASS_DRAG),S.unbind(window,"mousemove",n),S.unbind(window,"mouseup",o)}function i(i){return i.preventDefault(),e=i.clientX,S.addClass(t.__closeButton,Q.CLASS_DRAG),S.bind(window,"mousemove",n),S.bind(window,"mouseup",o),!1}t.__resize_handle=document.createElement("div"),a.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),S.bind(t.__resize_handle,"mousedown",i),S.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function st(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function ct(t,e){var n={};return a.each(t.__rememberedObjects,(function(o,i){var r={},s=t.__rememberedObjectIndecesToControllers[i];a.each(s,(function(t,n){r[n]=e?t.initialValue:t.getValue()})),n[i]=r})),n}Q.toggleHide=function(){Y=!Y,a.each(K,(function(t){t.domElement.style.display=Y?"none":""}))},Q.CLASS_AUTO_PLACE="a",Q.CLASS_AUTO_PLACE_CONTAINER="ac",Q.CLASS_MAIN="main",Q.CLASS_CONTROLLER_ROW="cr",Q.CLASS_TOO_TALL="taller-than-window",Q.CLASS_CLOSED="closed",Q.CLASS_CLOSE_BUTTON="close-button",Q.CLASS_CLOSE_TOP="close-top",Q.CLASS_CLOSE_BOTTOM="close-bottom",Q.CLASS_DRAG="drag",Q.DEFAULT_WIDTH=245,Q.TEXT_CLOSED="Close Controls",Q.TEXT_OPEN="Open Controls",Q._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||Q.toggleHide()},S.bind(window,"keydown",Q._keydownHandler,!1),a.extend(Q.prototype,{add:function(t,e){return et(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return et(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;a.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&W.removeChild(this.domElement);var t=this;a.each(this.__folders,(function(e){t.removeFolder(e)})),S.unbind(window,"keydown",Q._keydownHandler,!1),Z(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new Q(e);this.__folders[t]=n;var o=J(this,n.domElement);return S.addClass(o,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],Z(t);var e=this;a.each(t.__folders,(function(e){t.removeFolder(e)})),a.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=S.getOffset(t.__ul).top,n=0;a.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=S.getHeight(e))})),window.innerHeight-e-20<n?(S.addClass(t.domElement,Q.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(S.removeClass(t.domElement,Q.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&a.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:a.debounce((function(){this.onResize()}),50),remember:function(){if(a.isUndefined(G)&&((G=new U).domElement.innerHTML=H),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;a.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&rt(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&st(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=ct(this)),t.folders={},a.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=ct(this),$(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=ct(this,!0)),this.load.remembered[t]=ct(this),this.preset=t,ot(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){a.each(this.__controllers,(function(e){this.getRoot().load.remembered?tt(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),a.each(this.__folders,(function(t){t.revert(t)})),t||$(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&V.call(window,(function(){t(e)}));a.each(e,(function(t){t.updateDisplay()}))}(this.__listening)},updateDisplay:function(){a.each(this.__controllers,(function(t){t.updateDisplay()})),a.each(this.__folders,(function(t){t.updateDisplay()}))}});var lt={color:{Color:b,math:h,interpret:u},controllers:{Controller:w,BooleanController:A,OptionController:M,StringController:O,NumberController:R,NumberControllerBox:F,NumberControllerSlider:L,FunctionController:z,ColorController:N},dom:{dom:S},gui:{GUI:Q},GUI:Q};e.a=lt},function(t,e,n){var o;t.exports=((o=function(){function t(t){return i.appendChild(t.dom),t}function e(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";n=t}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(t){t.preventDefault(),e(++n%i.children.length)}),!1);var r=(performance||Date).now(),a=r,s=0,c=t(new o.Panel("FPS","#0ff","#002")),l=t(new o.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new o.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:i,addPanel:t,showPanel:e,begin:function(){r=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(l.update(t-r,200),t>a+1e3&&(c.update(1e3*s/(t-a),100),a=t,s=0,u)){var e=performance.memory;u.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:i,setMode:e}}).Panel=function(t,e,n){var o=1/0,i=0,r=Math.round,a=r(window.devicePixelRatio||1),s=80*a,c=48*a,l=3*a,u=2*a,d=3*a,h=15*a,f=74*a,p=30*a,m=document.createElement("canvas");m.width=s,m.height=c,m.style.cssText="width:80px;height:48px";var _=m.getContext("2d");return _.font="bold "+9*a+"px Helvetica,Arial,sans-serif",_.textBaseline="top",_.fillStyle=n,_.fillRect(0,0,s,c),_.fillStyle=e,_.fillText(t,l,u),_.fillRect(d,h,f,p),_.fillStyle=n,_.globalAlpha=.9,_.fillRect(d,h,f,p),{dom:m,update:function(c,v){o=Math.min(o,c),i=Math.max(i,c),_.fillStyle=n,_.globalAlpha=1,_.fillRect(0,0,s,h),_.fillStyle=e,_.fillText(r(c)+" "+t+" ("+r(o)+"-"+r(i)+")",l,u),_.drawImage(m,d+a,h,f-a,p,d,h,f-a,p),_.fillRect(d+f-a,h,a,p),_.fillStyle=n,_.globalAlpha=.9,_.fillRect(d+f-a,h,a,r((1-c/v)*p))}}},o)},,,,,,,,,function(t,e,n){"use strict";n.r(e);var o=n(4),i=n.n(o),r=n(0),a=n(3);function s(t,e){switch(t.type){case"noise":return"opNoise(".concat(c(t.transformations,e),", ").concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(t.noiseProportion.toFixed(2),")");case"onion":return"opOnion(".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(t.thickness.toFixed(2),")");case"union":return"min(".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(s(t.shapes[1],c(t.transformations,e)),")");case"sub":return"max(-".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(s(t.shapes[1],c(t.transformations,e)),")");case"intersect":return"max(".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(s(t.shapes[1],c(t.transformations,e)),")");case"smoothUnion":return"opSmoothU(".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(s(t.shapes[1],c(t.transformations,e)),", ").concat(t.k.toFixed(2),")");case"smoothSub":return"opSmoothSub(".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(s(t.shapes[1],c(t.transformations,e)),", ").concat(t.k.toFixed(2),")");case"smoothIntersect":return"opSmoothIntersect(".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(s(t.shapes[1],c(t.transformations,e)),", ").concat(t.k.toFixed(2),")");case"unionStairs":return"opUnionStairs(".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(s(t.shapes[1],c(t.transformations,e)),", ").concat(t.r.toFixed(2),", ").concat(t.n.toFixed(2),")");case"intersectionStairs":return"opIntersectionStairs(".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(s(t.shapes[1],c(t.transformations,e)),", ").concat(t.r.toFixed(2),", ").concat(t.n.toFixed(2),")");case"differenceStairs":return"opDifferenceStairs(".concat(s(t.shapes[0],c(t.transformations,e)),", ").concat(s(t.shapes[1],c(t.transformations,e)),", ").concat(t.r.toFixed(2),", ").concat(t.n.toFixed(2),")");case"sphere":return"sdSphere(".concat(c(t.transformations,e),", ").concat(t.radius.toFixed(2),")");case"box":return"sdBox(".concat(c(t.transformations,e),", vec3(").concat(t.corner.x,", ").concat(t.corner.y,", ").concat(t.corner.z,"))");case"roundBox":return"sdRoundBox(".concat(c(t.transformations,e),", vec3(").concat(t.corner.x,", ").concat(t.corner.y,", ").concat(t.corner.z,"), ").concat(t.r.toFixed(2),")");case"cylinder":return"sdCappedCylinder(".concat(c(t.transformations,e),", ").concat(t.height.toFixed(2),", ").concat(t.radius.toFixed(2),")");case"roundCylinder":return"sdRoundedCylinder(".concat(c(t.transformations,e),", ").concat(t.rA.toFixed(2),", ").concat(t.rB.toFixed(2),", ").concat(t.h.toFixed(2),")");case"plane":return"sdPlane(".concat(c(t.transformations,e),", vec4(").concat(t.normal.x,", ").concat(t.normal.y,", ").concat(t.normal.z,", ").concat(t.normal.w,"))");case"torus":return"sdTorus(".concat(c(t.transformations,e),", vec2(").concat(t.t.x,", ").concat(t.t.y,"))");case"elongatedTorus":return"sdElongatedTorus(".concat(c(t.transformations,e),", vec3(").concat(t.h.x,", ").concat(t.h.y,", ").concat(t.h.z,"), vec2(").concat(t.torus.tx,", ").concat(t.torus.ty,"))");case"link":return"sdLink(".concat(c(t.transformations,e),", ").concat(t.length.toFixed(2),", ").concat(t.r1.toFixed(2),", ").concat(t.r2.toFixed(2),")");case"ellipsoid":return"sdEllipsoid(".concat(c(t.transformations,e),", vec3(").concat(t.r.x,", ").concat(t.r.y,", ").concat(t.r.z,"))");case"cone":return"sdCone(".concat(c(t.transformations,e),", vec2(").concat(t.c.x,", ").concat(t.c.y,"), ").concat(t.h.toFixed(2),")");case"pyramid":return"sdPyramid(".concat(c(t.transformations,e),", ").concat(t.h.toFixed(2),")")}}function c(t,e){return t.reverse(),t.reduce((function(t,n){switch(n.type){case"translate":return"opTx(".concat(t,", vec3(").concat(n.offset.x,", ").concat(n.offset.y,", ").concat(n.offset.z,"))");case"scale":return"opScale(".concat(t,", ").concat(n.factor.toFixed(2),")");case"infiniteTile":return"opInf(".concat(t,", vec3(").concat(n.cell.x,", ").concat(n.cell.y,", ").concat(n.cell.z,"))");case"finiteTile":return"opFiniteRep(".concat(t,", vec3(").concat(n.cell.x,", ").concat(n.cell.y,", ").concat(n.cell.z,"), vec3(").concat(n.l.x,", ").concat(n.l.y,", ").concat(n.l.z,"))");case"rotateX":return"opRotX(".concat(t,", ").concat(n.a.toFixed(2),")");case"rotateY":return"opRotY(".concat(t,", ").concat(n.a.toFixed(2),")");case"rotateZ":return"opRotZ(".concat(t,", ").concat(n.a.toFixed(2),")");case"bend":return"opBend(".concat(t,", ").concat(n.k.toFixed(2),")");case"twist":return"opTwist(".concat(t,", ").concat(n.k.toFixed(2),")");case"modPolar":return"opModPolar(".concat(t,", ").concat(n.reps.toFixed(2),")");case"elongate":return"opElongate(".concat(t,", vec3(").concat(n.h.x,", ").concat(n.h.y,", ").concat(n.h.z,")).w + ").concat(s(n.shapes[0],c(n.transformations,e)))}}),e)}var l=n(1),u=n(2);function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function f(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function p(t,e,n){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,n);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=n}return n}var m=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),A.add(this),_.set(this,{writable:!0,value:100}),v.set(this,{writable:!0,value:1}),g.set(this,{writable:!0,value:150}),b.set(this,{writable:!0,value:{x:.5,y:.1,z:0,xSpeed:0,ySpeed:0,zSpeed:0}}),y.set(this,{writable:!0,value:{x:0,y:0,z:0}}),x.set(this,{writable:!0,value:[0,0,0,1]}),w.set(this,{writable:!0,value:void 0}),C.set(this,{writable:!0,value:[]}),E.set(this,{writable:!0,value:[]}),k.set(this,{writable:!0,value:void 0}),S.set(this,{writable:!0,value:void 0}),p(this,S,e),p(this,w,n)}var e,n,o;return e=t,(n=[{key:"pop",value:function(){f(this,w).removeFolder(f(this,E).pop()),f(this,C).pop(),h(this,A,M).call(this)}},{key:"sphere",value:function(){var t=this,e={type:"sphere",radius:1},n=f(this,w).addFolder("".concat(f(this,C).length,": sphere"));n.add(e,"radius",0,30,.1).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"box",value:function(){var t=this,e={type:"box",corner:{x:1,y:1,z:1}},n=f(this,w).addFolder("".concat(f(this,C).length,": box"));n.add(e.corner,"x",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.corner,"y",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.corner,"z",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"roundBox",value:function(){var t=this,e={type:"roundBox",corner:{x:1,y:1,z:1},r:.25},n=f(this,w).addFolder("".concat(f(this,C).length,": roundBox"));n.add(e.corner,"x",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.corner,"y",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.corner,"z",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"r",0,1,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"cylinder",value:function(){var t=this,e={type:"cylinder",height:1,radius:1},n=f(this,w).addFolder("".concat(f(this,C).length,": cylinder"));n.add(e,"height",0,30,.1).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"radius",0,30,.1).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"roundCylinder",value:function(){var t=this,e={type:"roundCylinder",rA:1,rB:1,h:1},n=f(this,w).addFolder("".concat(f(this,C).length,": roundCylinder"));n.add(e,"h",0,30,.1).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"rA",0,10,.1).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"rB",0,10,.1).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"plane",value:function(){var t=this,e={type:"plane",normal:{x:0,y:1,z:0,w:0}},n=f(this,w).addFolder("".concat(f(this,C).length,": plane"));n.add(e.normal,"x",0,1,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.normal,"y",0,1,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.normal,"z",0,1,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.normal,"w",-30,30,.1).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"torus",value:function(){var t=this,e={type:"torus",t:{x:.25,y:.25}},n=f(this,w).addFolder("".concat(f(this,C).length,": torus"));n.add(e.t,"x",0,20,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.t,"y",0,20,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"link",value:function(){var t=this,e={type:"link",length:1,r1:.25,r2:.25},n=f(this,w).addFolder("".concat(f(this,C).length,": link"));n.add(e,"length",0,20,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"r1",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"r2",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"ellipsoid",value:function(){var t=this,e={type:"ellipsoid",r:{x:.5,y:.5,z:.5}},n=f(this,w).addFolder("".concat(f(this,C).length,": ellipsoid"));n.add(e.r,"x",0,20,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.r,"y",0,20,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.r,"z",0,20,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"cone",value:function(){var t=this,e={type:"cone",c:{x:.5,y:.5},h:1},n=f(this,w).addFolder("".concat(f(this,C).length,": cone"));n.add(e.c,"x",0,1,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.c,"y",0,1,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"h",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"pyramid",value:function(){var t=this,e={type:"pyramid",h:1},n=f(this,w).addFolder("".concat(f(this,C).length,": pyramid"));n.add(e,"h",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"translate",value:function(){var t=this,e={type:"translate",offset:{x:0,y:0,z:0}},n=f(this,w).addFolder("".concat(f(this,C).length,": translate"));n.add(e.offset,"x",-30,30,.001).onChange((function(){return h(t,A,M).call(t)})),n.add(e.offset,"y",-30,30,.001).onChange((function(){return h(t,A,M).call(t)})),n.add(e.offset,"z",-30,30,.001).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"scale",value:function(){var t=this,e={type:"scale",factor:1},n=f(this,w).addFolder("".concat(f(this,C).length,": scale"));n.add(e,"factor",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"noise",value:function(){var t=this,e={type:"noise",noiseProportion:.15},n=f(this,w).addFolder("".concat(f(this,C).length,": noise"));n.add(e,"noiseProportion",.01,.5,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"onion",value:function(){var t=this,e={type:"onion",thickness:.5},n=f(this,w).addFolder("".concat(f(this,C).length,": onion"));n.add(e,"thickness",0,5,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"union",value:function(){var t=f(this,w).addFolder("".concat(f(this,C).length,": union"));f(this,C).push({type:"union"}),f(this,E).push(t),h(this,A,M).call(this)}},{key:"sub",value:function(){var t=f(this,w).addFolder("".concat(f(this,C).length,": sub"));f(this,C).push({type:"sub"}),f(this,E).push(t),h(this,A,M).call(this)}},{key:"intersect",value:function(){var t=f(this,w).addFolder("".concat(f(this,C).length,": intersect"));f(this,C).push({type:"intersect"}),f(this,E).push(t),h(this,A,M).call(this)}},{key:"smoothUnion",value:function(){var t=this,e={type:"smoothUnion",k:.8},n=f(this,w).addFolder("".concat(f(this,C).length,": smoothUnion"));n.add(e,"k",0,2,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"smoothSub",value:function(){var t=this,e={type:"smoothSub",k:.8},n=f(this,w).addFolder("".concat(f(this,C).length,": smoothSub"));n.add(e,"k",0,2,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"smoothIntersect",value:function(){var t=this,e={type:"smoothIntersect",k:.8},n=f(this,w).addFolder("".concat(f(this,C).length,": smoothIntersect"));n.add(e,"k",0,2,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"unionStairs",value:function(){var t=this,e={type:"unionStairs",r:.4,n:4},n=f(this,w).addFolder("".concat(f(this,C).length,": unionStairs"));n.add(e,"r",0,2,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"n",0,10,1).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"intersectionStairs",value:function(){var t=this,e={type:"intersectionStairs",r:.4,n:4},n=f(this,w).addFolder("".concat(f(this,C).length,": intersectionStairs"));n.add(e,"r",0,2,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"n",0,10,1).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"differenceStairs",value:function(){var t=this,e={type:"differenceStairs",r:.4,n:4},n=f(this,w).addFolder("".concat(f(this,C).length,": differenceStairs"));n.add(e,"r",0,2,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e,"n",0,10,1).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"modPolar",value:function(){var t=this,e={type:"modPolar",reps:5},n=f(this,w).addFolder("".concat(f(this,C).length,": modPolar"));n.add(e,"reps",0,20,1).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"infiniteTile",value:function(){var t=this,e={type:"infiniteTile",cell:{x:1,y:1,z:1}},n=f(this,w).addFolder("".concat(f(this,C).length,": infiniteTile"));n.add(e.cell,"x",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.cell,"y",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.cell,"z",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"finiteTile",value:function(){var t=this,e={type:"finiteTile",cell:{x:1,y:1,z:1},l:{x:1,y:1,z:1}},n=f(this,w).addFolder("".concat(f(this,C).length,": finiteTile"));n.add(e.cell,"x",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.cell,"y",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.cell,"z",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.l,"x",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.l,"y",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.l,"z",0,30,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"rotateX",value:function(){var t=this,e={type:"rotateX",a:0},n=f(this,w).addFolder("".concat(f(this,C).length,": rotateX"));n.add(e,"a",0,2*Math.PI,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"rotateY",value:function(){var t=this,e={type:"rotateY",a:0},n=f(this,w).addFolder("".concat(f(this,C).length,": rotateY"));n.add(e,"a",0,2*Math.PI,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"rotateZ",value:function(){var t=this,e={type:"rotateZ",a:0},n=f(this,w).addFolder("".concat(f(this,C).length,": rotateZ"));n.add(e,"a",0,2*Math.PI,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"bend",value:function(){var t=this,e={type:"bend",k:.4},n=f(this,w).addFolder("".concat(f(this,C).length,": bend"));n.add(e,"k",0,1,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"twist",value:function(){var t=this,e={type:"twist",k:.4},n=f(this,w).addFolder("".concat(f(this,C).length,": twist"));n.add(e,"k",0,1,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"elongatedTorus",value:function(){var t=this,e={type:"elongatedTorus",h:{x:.2,y:0,z:.2},torus:{tx:.25,ty:.25}},n=f(this,w).addFolder("".concat(f(this,C).length,": elongatedTorus"));n.add(e.h,"x",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.h,"y",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.h,"z",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.torus,"tx",0,20,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.torus,"ty",0,20,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"elongate",value:function(){var t=this,e={type:"elongate",h:{x:.2,y:0,z:.2}},n=f(this,w).addFolder("".concat(f(this,C).length,": elongate"));n.add(e.h,"x",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.h,"y",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.add(e.h,"z",0,10,.01).onChange((function(){return h(t,A,M).call(t)})),n.open(),f(this,C).push(e),f(this,E).push(n),h(this,A,M).call(this)}},{key:"save",value:function(){var t=new Blob([this.shader.source],{type:"text/plain"}),e=URL.createObjectURL(t);window.open(e),URL.revokeObjectURL(e)}},{key:"maxSteps",get:function(){return f(this,_)},set:function(t){p(this,_,t),h(this,A,M).call(this)}},{key:"maxDistance",get:function(){return f(this,v)},set:function(t){p(this,v,t),h(this,A,M).call(this)}},{key:"maxMarchDistance",get:function(){return f(this,g)},set:function(t){p(this,g,t),h(this,A,M).call(this)}},{key:"cameraAngles",get:function(){return f(this,b)},set:function(t){p(this,b,t),h(this,A,M).call(this)}},{key:"cameraPos",get:function(){return f(this,y)},set:function(t){p(this,y,t),h(this,A,M).call(this)}},{key:"backgroundColor",get:function(){return f(this,x)},set:function(t){p(this,x,t),h(this,A,M).call(this)}},{key:"shader",get:function(){if(f(this,k))return f(this,k);var t=function(t,e){if(0===t.length)return"MAX_DISTANCE + 1.0";var n=[];return t.forEach((function(t){switch(t.type){case"translate":case"scale":case"infiniteTile":case"finiteTile":case"rotateX":case"rotateY":case"rotateZ":case"bend":case"twist":case"modPolar":case"elongate":var e=n.pop();e.transformations.push(t),n.push(e);break;case"sub":case"union":case"intersect":case"smoothUnion":case"smoothSub":case"smoothIntersect":case"unionStairs":case"intersectionStairs":case"differenceStairs":var o=n.pop(),i=n.pop();t.transformations=[],t.shapes=[o,i],n.push(t);break;case"noise":case"onion":var r=n.pop();t.transformations=[],t.shapes=[r],n.push(t);break;default:t.transformations=[],n.push(t)}})),s(n[0],e)}(f(this,C),"p"),e="\n      const int MAX_STEPS = ".concat(this.maxSteps,";\n      const float MAX_MARCH_DISTANCE = ").concat(this.maxMarchDistance.toFixed(2),";\n      const float MAX_DISTANCE = ").concat(this.maxDistance.toFixed(2),";\n      const vec4 BACKGROUND_COLOR = vec4(").concat(this.backgroundColor[0]/256,", ").concat(this.backgroundColor[1]/256,", ").concat(this.backgroundColor[2]/256,", ").concat(this.backgroundColor[3],");\n\n      void init() {}\n\n      float sdf(vec3 p, out Material mat) {\n        mat = Material(vec3(0.0,0.4, 0.6), vec3(0.0,0.4, 0.6), vec3(0.0,0.4, 0.6), 10.0, NONREFLECT);\n        return ").concat(t,";\n      }\n    ");return p(this,k,f(this,S).call(this,l.a+"\n      const int N_LIGHTS = 2;\n\n      Light lights[N_LIGHTS] =\n      Light[N_LIGHTS](\n          Light(vec3(10,20,20), vec3(1,1,1), 1.0, 1.0),\n          Light(vec3(10,20,-20), vec3(1,1,1), 1.0, 1.0));\n    "+e+u.a)),f(this,k)}}])&&d(e.prototype,n),o&&d(e,o),t}(),_=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,y=new WeakMap,x=new WeakMap,w=new WeakMap,C=new WeakMap,E=new WeakMap,k=new WeakMap,S=new WeakMap,A=new WeakSet,M=function(){p(this,k,null)};window.onload=function(){var t=document.getElementById("canvas"),e=Object(r.a)(t),n=e.render,o=function(t){var e=new a.a.GUI,n=new m(t,e),o=new a.a.GUI,i=o.addFolder("max");i.add(n,"maxSteps",0,400,1),i.add(n,"maxDistance",0,1,.01),i.add(n,"maxMarchDistance",0,400,.1);var r=o.addFolder("cameraAngle");r.add(n.cameraAngles,"x",0,2*Math.PI),r.add(n.cameraAngles,"y",0,2*Math.PI),r.add(n.cameraAngles,"z",0,2*Math.PI),r.add(n.cameraAngles,"xSpeed",0,1),r.add(n.cameraAngles,"ySpeed",0,1),r.add(n.cameraAngles,"zSpeed",0,1);var s=o.addFolder("cameraPos");s.add(n.cameraPos,"x"),s.add(n.cameraPos,"y"),s.add(n.cameraPos,"z"),o.addColor(n,"backgroundColor"),o.add(n,"save");var c=o.addFolder("shapes");c.add(n,"sphere"),c.add(n,"box"),c.add(n,"roundBox"),c.add(n,"cylinder"),c.add(n,"roundCylinder"),c.add(n,"plane"),c.add(n,"torus"),c.add(n,"elongatedTorus"),c.add(n,"link"),c.add(n,"ellipsoid"),c.add(n,"cone"),c.add(n,"pyramid");var l=o.addFolder("operations");l.add(n,"union"),l.add(n,"smoothUnion"),l.add(n,"sub"),l.add(n,"smoothSub"),l.add(n,"intersect"),l.add(n,"smoothIntersect"),l.add(n,"unionStairs"),l.add(n,"intersectionStairs"),l.add(n,"differenceStairs"),l.add(n,"noise"),l.add(n,"onion");var u=o.addFolder("transformations");return u.add(n,"modPolar"),u.add(n,"translate"),u.add(n,"scale"),u.add(n,"infiniteTile"),u.add(n,"finiteTile"),u.add(n,"rotateX"),u.add(n,"rotateY"),u.add(n,"rotateZ"),u.add(n,"bend"),u.add(n,"twist"),u.add(n,"elongate"),e.add(n,"pop"),n}(e.newShader),s=new i.a;s.showPanel(0),document.body.appendChild(s.dom),window.requestAnimationFrame((function t(e){var i=.001*e;s.begin(),n(i,o.cameraAngles,o.cameraPos,o.shader),s.end(),window.requestAnimationFrame(t)}));var c=function(){var e=t.clientWidth,n=t.clientHeight;t.width===e&&t.height===n||(t.width=e,t.height=n);var o=window;o.innerHeight,o.innerWidth};c(),window.addEventListener("resize",c,!1)}}]);
//# sourceMappingURL=editor.16a15b341ac6d655c9df.js.map